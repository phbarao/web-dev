(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{3434:function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"acquireNoteLock",function(){return c}),n.d(r,"authenticateToSharedNotebook",function(){return f}),n.d(r,"copyNote",function(){return v}),n.d(r,"createLinkedNotebook",function(){return b}),n.d(r,"createNote",function(){return w}),n.d(r,"createNotebook",function(){return P}),n.d(r,"createOrUpdateNotebookShares",function(){return S}),n.d(r,"createOrUpdateSharedNotes",function(){return L}),n.d(r,"createSearch",function(){return I}),n.d(r,"createTag",function(){return G}),n.d(r,"deleteNote",function(){return D}),n.d(r,"expungeLinkedNotebook",function(){return F}),n.d(r,"expungeNote",function(){return V}),n.d(r,"expungeNotes",function(){return J}),n.d(r,"expungeNotebook",function(){return X}),n.d(r,"expungeSearch",function(){return $}),n.d(r,"expungeTag",function(){return ne}),n.d(r,"filteredSearch",function(){return ae}),n.d(r,"findNotesMetadata",function(){return ce}),n.d(r,"findSearchSuggestionsV2",function(){return fe}),n.d(r,"findNoteCounts",function(){return ve}),n.d(r,"getDefaultNotebook",function(){return be}),n.d(r,"getUserNotebook",function(){return we}),n.d(r,"getFilteredSyncChunk",function(){return Pe}),n.d(r,"getLinkedNotebookSyncChunk",function(){return Se}),n.d(r,"getLinkedNotebookSyncState",function(){return Le}),n.d(r,"getNoteTagNames",function(){return Ie}),n.d(r,"getNoteLockStatus",function(){return Ge}),n.d(r,"getNoteSnippets",function(){return De}),n.d(r,"getNoteWithResultSpec",function(){return Fe}),n.d(r,"getNotebook",function(){return Ve}),n.d(r,"getNotebookShares",function(){return Je}),n.d(r,"getNoteShares",function(){return Xe}),n.d(r,"getOrCreateLinkedNotebook",function(){return $e}),n.d(r,"getPreferences",function(){return nt}),n.d(r,"getSearch",function(){return at}),n.d(r,"getSharedNotebookByAuth",function(){return ct}),n.d(r,"getSyncState",function(){return ft}),n.d(r,"getSyncStateWithMetrics",function(){return vt}),n.d(r,"getWorkspaceUserInterfaceProperties",function(){return bt}),n.d(r,"setWorkspaceUserInterfaceLayoutStyle",function(){return wt}),n.d(r,"setNoteUserInterfaceDisplayOrder",function(){return Pt}),n.d(r,"setNotebookUserInterfaceDisplayOrder",function(){return Nt}),n.d(r,"setNotebookUserInterfaceColors",function(){return Lt}),n.d(r,"listAccessibleBusinessNotebooks",function(){return It}),n.d(r,"listLinkedNotebooks",function(){return Gt}),n.d(r,"listNotebooks",function(){return Dt}),n.d(r,"listPublishedBusinessNotebooks",function(){return Ft}),n.d(r,"listSearches",function(){return Vt}),n.d(r,"listSharedNotebooks",function(){return Jt}),n.d(r,"listTags",function(){return Xt}),n.d(r,"listTagsByNotebook",function(){return $t}),n.d(r,"manageNotebookShares",function(){return nn}),n.d(r,"manageNoteShares",function(){return an}),n.d(r,"releaseNoteLock",function(){return sn}),n.d(r,"renameNotebook",function(){return ln}),n.d(r,"sendLogRequest",function(){return dn}),n.d(r,"setNotebookRecipientSettings",function(){return yn}),n.d(r,"shareNote",function(){return kn}),n.d(r,"stopSharingNote",function(){return Rn}),n.d(r,"updateNoteIfUsnMatches",function(){return On}),n.d(r,"updateNotebook",function(){return Tn}),n.d(r,"updatePreferences",function(){return Un}),n.d(r,"updateSearch",function(){return _n}),n.d(r,"updateTag",function(){return An});var o=n(364),a=n(367);function u(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function i(){return(i=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","acquireNoteLock",function(e){return t.acquireNoteLock(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var c=function(e,t,n){return i.apply(this,arguments)};function s(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function p(){return(p=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){s(a,r,o,u,i,"next",e)}function i(e){s(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","authenticateToSharedNotebook",function(e){return t.authenticateToSharedNotebook(n,r||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var f=function(e,t,n){return p.apply(this,arguments)};function l(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function h(){return(h=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){l(a,r,o,u,i,"next",e)}function i(e){l(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","copyNote",function(e){return t.copyNote(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var v=function(e,t,n,r){return h.apply(this,arguments)};function d(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function m(){return(m=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){d(a,r,o,u,i,"next",e)}function i(e){d(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createLinkedNotebook",function(e){return t.createLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var b=function(e,t,n){return m.apply(this,arguments)};function y(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function g(){return(g=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){y(a,r,o,u,i,"next",e)}function i(e){y(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createNote",function(e){return t.createNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var w=function(e,t,n){return g.apply(this,arguments)};function k(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function x(){return(x=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){k(a,r,o,u,i,"next",e)}function i(e){k(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createNotebook",function(e){return t.createNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var P=function(e,t,n){return x.apply(this,arguments)};function R(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function N(){return(N=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){R(a,r,o,u,i,"next",e)}function i(e){R(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createOrUpdateNotebookShares",function(e){return t.createOrUpdateNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var S=function(e,t,n){return N.apply(this,arguments)};function O(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function j(){return(j=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){O(a,r,o,u,i,"next",e)}function i(e){O(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createOrUpdateSharedNotes",function(e){return t.createOrUpdateSharedNotes(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var L=function(e,t,n){return j.apply(this,arguments)};function T(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function E(){return(E=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){T(a,r,o,u,i,"next",e)}function i(e){T(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createSearch",function(e){return t.createSearch(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var I=function(e,t,n){return E.apply(this,arguments)};function U(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function C(){return(C=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){U(a,r,o,u,i,"next",e)}function i(e){U(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createTag",function(e){return t.createTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var G=function(e,t,n){return C.apply(this,arguments)};function _(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function W(){return(W=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_(a,r,o,u,i,"next",e)}function i(e){_(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","deleteNote",function(e){return t.deleteNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var D=function(e,t,n){return W.apply(this,arguments)};function A(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function M(){return(M=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){A(a,r,o,u,i,"next",e)}function i(e){A(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeLinkedNotebook",function(e){return t.expungeLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var F=function(e,t,n){return M.apply(this,arguments)};function q(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function B(){return(B=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){q(a,r,o,u,i,"next",e)}function i(e){q(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNote",function(e){return t.expungeNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var V=function(e,t,n){return B.apply(this,arguments)};function H(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Y(){return(Y=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){H(a,r,o,u,i,"next",e)}function i(e){H(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNotes",function(e){return t.expungeNotes(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var J=function(e,t,n){return Y.apply(this,arguments)};function K(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function z(){return(z=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){K(a,r,o,u,i,"next",e)}function i(e){K(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNotebook",function(e){return t.expungeNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var X=function(e,t,n){return z.apply(this,arguments)};function Q(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Z(){return(Z=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Q(a,r,o,u,i,"next",e)}function i(e){Q(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeSearch",function(e){return t.expungeSearch(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $=function(e,t,n){return Z.apply(this,arguments)};function ee(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function te(){return(te=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ee(a,r,o,u,i,"next",e)}function i(e){ee(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeTag",function(e){return t.expungeTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ne=function(e,t,n){return te.apply(this,arguments)};function re(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function oe(){return(oe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){re(a,r,o,u,i,"next",e)}function i(e){re(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","filteredSearch",function(e){return t.filteredSearch(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ae=function(e,t,n,r){return oe.apply(this,arguments)};function ue(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ie(){return(ie=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ue(a,r,o,u,i,"next",e)}function i(e){ue(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i,c){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findNotesMetadata",function(e){return t.findNotesMetadata(c||Object(o.a)(),n,r,u,i,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ce=function(e,t,n,r,o,a){return ie.apply(this,arguments)};function se(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function pe(){return(pe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){se(a,r,o,u,i,"next",e)}function i(e){se(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findSearchSuggestionsV2",function(e){return t.findSearchSuggestionsV2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var fe=function(e,t,n){return pe.apply(this,arguments)};function le(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function he(){return(he=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){le(a,r,o,u,i,"next",e)}function i(e){le(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findNoteCounts",function(e){return t.findNoteCounts(r||Object(o.a)(),n,!1,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ve=function(e,t,n){return he.apply(this,arguments)};function de(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function me(){return(me=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){de(a,r,o,u,i,"next",e)}function i(e){de(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getDefaultNotebook",function(e){return t.getDefaultNotebook(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var be=function(e,t){return me.apply(this,arguments)};function ye(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ge(){return(ge=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ye(a,r,o,u,i,"next",e)}function i(e){ye(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getUserNotebook",function(e){return t.getUserNotebook(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var we=function(e,t){return ge.apply(this,arguments)};function ke(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xe(){return(xe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ke(a,r,o,u,i,"next",e)}function i(e){ke(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getFilteredSyncChunk",function(e){return t.getFilteredSyncChunk(i||Object(o.a)(),n,r,u,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Pe=function(e,t,n,r,o){return xe.apply(this,arguments)};function Re(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ne(){return(Ne=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Re(a,r,o,u,i,"next",e)}function i(e){Re(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i,c){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getLinkedNotebookSyncChunk",function(e){return t.getLinkedNotebookSyncChunk(c||Object(o.a)(),n,r,u,i,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Se=function(e,t,n,r,o,a){return Ne.apply(this,arguments)};function Oe(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function je(){return(je=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Oe(a,r,o,u,i,"next",e)}function i(e){Oe(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getLinkedNotebookSyncState",function(e){return t.getLinkedNotebookSyncState(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Le=function(e,t,n){return je.apply(this,arguments)};function Te(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ee(){return(Ee=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Te(a,r,o,u,i,"next",e)}function i(e){Te(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteTagNames",function(e){return t.getNoteTagNames(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ie=function(e,t,n){return Ee.apply(this,arguments)};function Ue(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ce(){return(Ce=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ue(a,r,o,u,i,"next",e)}function i(e){Ue(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteLockStatus",function(e){return t.getNoteLockStatus(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ge=function(e,t,n){return Ce.apply(this,arguments)};function _e(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function We(){return(We=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_e(a,r,o,u,i,"next",e)}function i(e){_e(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteSnippets",function(e){return t.getNoteSnippets(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var De=function(e,t,n,r){return We.apply(this,arguments)};function Ae(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Me(){return(Me=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ae(a,r,o,u,i,"next",e)}function i(e){Ae(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteWithResultSpec",function(e){t.getNoteWithResultSpec(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Fe=function(e,t,n,r){return Me.apply(this,arguments)};function qe(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Be(){return(Be=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qe(a,r,o,u,i,"next",e)}function i(e){qe(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNotebook",function(e){return t.getNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ve=function(e,t,n){return Be.apply(this,arguments)};function He(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ye(){return(Ye=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){He(a,r,o,u,i,"next",e)}function i(e){He(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNotebookShares",function(e){return t.getNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Je=function(e,t,n){return Ye.apply(this,arguments)};function Ke(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ze(){return(ze=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ke(a,r,o,u,i,"next",e)}function i(e){Ke(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteShares",function(e){return t.getNoteShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Xe=function(e,t,n){return ze.apply(this,arguments)};function Qe(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ze(){return(Ze=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qe(a,r,o,u,i,"next",e)}function i(e){Qe(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getOrCreateLinkedNotebook",function(e){return t.getOrCreateLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $e=function(e,t,n){return Ze.apply(this,arguments)};function et(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function tt(){return(tt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){et(a,r,o,u,i,"next",e)}function i(e){et(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getPreferences",function(e){return t.getPreferences(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var nt=function(e,t,n){return tt.apply(this,arguments)};function rt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ot(){return(ot=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rt(a,r,o,u,i,"next",e)}function i(e){rt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSearch",function(e){return t.getSearch(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var at=function(e,t,n){return ot.apply(this,arguments)};function ut(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function it(){return(it=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ut(a,r,o,u,i,"next",e)}function i(e){ut(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSharedNotebookByAuth",function(e){return t.getSharedNotebookByAuth(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ct=function(e,t){return it.apply(this,arguments)};function st(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function pt(){return(pt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){st(a,r,o,u,i,"next",e)}function i(e){st(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSyncState",function(e){return t.getSyncState(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ft=function(e,t){return pt.apply(this,arguments)};function lt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ht(){return(ht=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){lt(a,r,o,u,i,"next",e)}function i(e){lt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSyncStateWithMetrics",function(e){return t.getSyncStateWithMetrics(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var vt=function(e,t,n){return ht.apply(this,arguments)};function dt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function mt(){return(mt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){dt(a,r,o,u,i,"next",e)}function i(e){dt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getWorkspaceUserInterfaceProperties",function(e){return t.getWorkspaceUserInterfaceProperties(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var bt=function(e,t,n){return mt.apply(this,arguments)};function yt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gt(){return(gt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yt(a,r,o,u,i,"next",e)}function i(e){yt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setWorkspaceUserInterfaceLayoutStyle",function(e){return t.setWorkspaceUserInterfaceLayoutStyle(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var wt=function(e,t,n,r){return gt.apply(this,arguments)};function kt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xt(){return(xt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){kt(a,r,o,u,i,"next",e)}function i(e){kt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNoteUserInterfaceDisplayOrder",function(e){return t.setNoteUserInterfaceDisplayOrder(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Pt=function(e,t,n,r){return xt.apply(this,arguments)};function Rt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Nt(e,t,n,r){return St.apply(this,arguments)}function St(){return(St=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Rt(a,r,o,u,i,"next",e)}function i(e){Rt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookUserInterfaceDisplayOrder",function(e){return t.setNotebookUserInterfaceDisplayOrder(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ot(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function jt(){return(jt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ot(a,r,o,u,i,"next",e)}function i(e){Ot(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookUserInterfaceColors",function(e){return t.setNotebookUserInterfaceColors(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Lt=function(e,t,n,r){return jt.apply(this,arguments)};function Tt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Et(){return(Et=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Tt(a,r,o,u,i,"next",e)}function i(e){Tt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listAccessibleBusinessNotebooks",function(e){return t.listAccessibleBusinessNotebooks(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var It=function(e,t,n){return Et.apply(this,arguments)};function Ut(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ct(){return(Ct=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ut(a,r,o,u,i,"next",e)}function i(e){Ut(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listLinkedNotebooks",function(e){return t.listLinkedNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Gt=function(e,t){return Ct.apply(this,arguments)};function _t(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Wt(){return(Wt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_t(a,r,o,u,i,"next",e)}function i(e){_t(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listNotebooks",function(e){return t.listNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Dt=function(e,t){return Wt.apply(this,arguments)};function At(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Mt(){return(Mt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){At(a,r,o,u,i,"next",e)}function i(e){At(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listPublishedBusinessNotebooks",function(e){return t.listPublishedBusinessNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ft=function(e,t){return Mt.apply(this,arguments)};function qt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Bt(){return(Bt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qt(a,r,o,u,i,"next",e)}function i(e){qt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listSearches",function(e){return t.listSearches(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Vt=function(e,t){return Bt.apply(this,arguments)};function Ht(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yt(){return(Yt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ht(a,r,o,u,i,"next",e)}function i(e){Ht(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listSharedNotebooks",function(e){return t.listSharedNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Jt=function(e,t){return Yt.apply(this,arguments)};function Kt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function zt(){return(zt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Kt(a,r,o,u,i,"next",e)}function i(e){Kt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listTags",function(e){return t.listTags(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Xt=function(e,t){return zt.apply(this,arguments)};function Qt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Zt(){return(Zt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qt(a,r,o,u,i,"next",e)}function i(e){Qt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listTagsByNotebook",function(e){return t.listTagsByNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $t=function(e,t,n){return Zt.apply(this,arguments)};function en(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function tn(){return(tn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){en(a,r,o,u,i,"next",e)}function i(e){en(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","manageNotebookShares",function(e){t.manageNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var nn=function(e,t,n){return tn.apply(this,arguments)};function rn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function on(){return(on=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rn(a,r,o,u,i,"next",e)}function i(e){rn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","manageNoteShares",function(e){t.manageNoteShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var an=function(e,t,n){return on.apply(this,arguments)};function un(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cn(){return(cn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){un(a,r,o,u,i,"next",e)}function i(e){un(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","releaseNoteLock",function(e){return t.releaseNoteLock(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var sn=function(e,t,n){return cn.apply(this,arguments)};function pn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function fn(){return(fn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){pn(a,r,o,u,i,"next",e)}function i(e){pn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","renameNotebook",function(e){t.renameNotebook(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ln=function(e,t,n,r){return fn.apply(this,arguments)};function hn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function vn(){return(vn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){hn(a,r,o,u,i,"next",e)}function i(e){hn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","sendLogRequest",function(e){return t.sendLogRequest(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var dn=function(e,t,n){return vn.apply(this,arguments)};function mn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function bn(){return(bn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){mn(a,r,o,u,i,"next",e)}function i(e){mn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookRecipientSettings",function(e){return t.setNotebookRecipientSettings(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var yn=function(e,t,n,r){return bn.apply(this,arguments)};function gn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function wn(){return(wn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gn(a,r,o,u,i,"next",e)}function i(e){gn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","shareNote",function(e){return t.shareNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var kn=function(e,t,n){return wn.apply(this,arguments)};function xn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pn(){return(Pn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xn(a,r,o,u,i,"next",e)}function i(e){xn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","stopSharingNote",function(e){return t.stopSharingNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Rn=function(e,t,n){return Pn.apply(this,arguments)};function Nn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sn(){return(Sn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Nn(a,r,o,u,i,"next",e)}function i(e){Nn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateNoteIfUsnMatches",function(e){return t.updateNoteIfUsnMatches(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var On=function(e,t,n){return Sn.apply(this,arguments)};function jn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ln(){return(Ln=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){jn(a,r,o,u,i,"next",e)}function i(e){jn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateNotebook",function(e){t.updateNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Tn=function(e,t,n){return Ln.apply(this,arguments)};function En(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function In(){return(In=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){En(a,r,o,u,i,"next",e)}function i(e){En(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updatePreferences",function(e){t.updatePreferences(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Un=function(e,t,n){return In.apply(this,arguments)};function Cn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Gn(){return(Gn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Cn(a,r,o,u,i,"next",e)}function i(e){Cn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateSearch",function(e){return t.updateSearch(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var _n=function(e,t,n){return Gn.apply(this,arguments)};function Wn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Dn(){return(Dn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Wn(a,r,o,u,i,"next",e)}function i(e){Wn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateTag",function(e){return t.updateTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var An=function(e,t,n){return Dn.apply(this,arguments)},Mn=n(104),Fn=n(379),qn=n(466),Bn=n(30);function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Hn=Object(Bn.b)(),Yn=Hn.thriftProtocol,Jn=Hn.thriftTransport,Kn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=void 0,this.InterfaceConstructor=void 0}return function(e,t,n){t&&Vn(e.prototype,t),n&&Vn(e,n)}(e,[{key:"create",value:function(e){var t=Jn(e),n=Yn(t);return this.InterfaceConstructor(n)}},{key:"fromLocator",value:function(e){return this.fromString(qn.a.fromLocator(e,this.endpoint))}},{key:"fromString",value:function(e){var t=this;return new Promise(function(n){n(t.create(e))})}}]),e}();function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Xn(this,(e=Qn(t)).call.apply(e,[this].concat(o)))).endpoint="notestore",n.InterfaceConstructor=function(e){return new Fn.NoteStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,Kn),t}()),er=n(366);function tr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function nr(e){return rr.apply(this,arguments)}function rr(){return(rr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){tr(a,r,o,u,i,"next",e)}function i(e){tr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebookGuid,r=t.notebookIdentifier,o=t.shardId,e.prev=1,a=er.a.newPersonalLocator(!0,o,null),e.next=5,$n.fromLocator(a);case 5:return u=e.sent,e.next=8,f(u,r,null);case 8:return i=e.sent,e.abrupt("return",i.authenticationToken);case 12:e.prev=12,e.t0=e.catch(1),n&&Mn.a.publish("notebook","expungeNotebook",n);case 15:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var or=nr;function ar(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ur(){return(ur=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ar(a,r,o,u,i,"next",e)}function i(e){ar(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","addResource",function(e){return t.addResource(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.authenticateToSharedNotebook",function(e){return nr(e)});var ir=function(e,t,n){return ur.apply(this,arguments)};function cr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function sr(){return(sr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){cr(a,r,o,u,i,"next",e)}function i(e){cr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","createWorkspace",function(e){return t.createWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var pr=function(e,t,n){return sr.apply(this,arguments)};function fr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function lr(){return(lr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fr(a,r,o,u,i,"next",e)}function i(e){fr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","fileSupportTicket",function(e){return t.fileSupportTicket(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var hr=function(e,t,n){return lr.apply(this,arguments)};function vr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function dr(){return(dr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vr(a,r,o,u,i,"next",e)}function i(e){vr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getCrossPromotionInfo",function(e){return t.getCrossPromotionInfo(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var mr=function(e,t){return dr.apply(this,arguments)};function br(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yr(){return(yr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){br(a,r,o,u,i,"next",e)}function i(e){br(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getPromotionStatus",function(e){return t.getPromotionStatus(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var gr=function(e,t,n){return yr.apply(this,arguments)};function wr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function kr(){return(kr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){wr(a,r,o,u,i,"next",e)}function i(e){wr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getTsdEligibility",function(e){return t.getTsdEligibility(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var xr=function(e,t,n){return kr.apply(this,arguments)};function Pr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Rr(){return(Rr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Pr(a,r,o,u,i,"next",e)}function i(e){Pr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getUserRestrictions",function(e){return t.getUserRestrictions(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Nr=function(e,t){return Rr.apply(this,arguments)};function Sr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Or(){return(Or=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Sr(a,r,o,u,i,"next",e)}function i(e){Sr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getWorkspace",function(e){return t.getWorkspace(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var jr=function(e,t,n,r){return Or.apply(this,arguments)};function Lr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Tr(){return(Tr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Lr(a,r,o,u,i,"next",e)}function i(e){Lr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","leaveWorkspace",function(e){t.leaveWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Er=function(e,t,n){return Tr.apply(this,arguments)};function Ir(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ur(){return(Ur=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ir(a,r,o,u,i,"next",e)}function i(e){Ir(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","listNotebooksForIonOnly",function(e){t.listNotebooksForIonOnly(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Cr=function(e,t){return Ur.apply(this,arguments)};function Gr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function _r(){return(_r=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Gr(a,r,o,u,i,"next",e)}function i(e){Gr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","listWorkspacesWithResultSpec",function(e){return t.listWorkspacesWithResultSpec(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Wr=function(e,t,n,r){return _r.apply(this,arguments)};function Dr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ar(){return(Ar=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dr(a,r,o,u,i,"next",e)}function i(e){Dr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","manageWorkspaceSharing",function(e){return t.manageWorkspaceSharing(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Mr=function(e,t,n){return Ar.apply(this,arguments)};function Fr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qr(){return(qr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fr(a,r,o,u,i,"next",e)}function i(e){Fr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","moveNotebookToAccount",function(e){return t.moveNotebookToAccount(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Br=function(e,t,n){return qr.apply(this,arguments)};function Vr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Hr(){return(Hr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vr(a,r,o,u,i,"next",e)}function i(e){Vr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","promotionOptedOut",function(e){return t.promotionOptedOut(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Yr=function(e,t,n){return Hr.apply(this,arguments)};function Jr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Kr(){return(Kr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Jr(a,r,o,u,i,"next",e)}function i(e){Jr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","promotionsShown",function(e){return t.promotionsShown(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var zr=function(e,t,n){return Kr.apply(this,arguments)};function Xr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Qr(){return(Qr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Xr(a,r,o,u,i,"next",e)}function i(e){Xr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","sendWorkspaceViewedEvent",function(e){return t.sendWorkspaceViewedEvent(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Zr=function(e,t,n){return Qr.apply(this,arguments)};function $r(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function eo(){return(eo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$r(a,r,o,u,i,"next",e)}function i(e){$r(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","sendVerificationEmail",function(e){return t.sendVerificationEmail(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var to=function(e,t){return eo.apply(this,arguments)};function no(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ro(){return(ro=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){no(a,r,o,u,i,"next",e)}function i(e){no(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","updateNoteIfUsnMatches",function(e){return t.updateNoteIfUsnMatches(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var oo=function(e,t,n,r){return ro.apply(this,arguments)};function ao(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function uo(){return(uo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ao(a,r,o,u,i,"next",e)}function i(e){ao(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","updateWorkspace",function(e){return t.updateWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var io=function(e,t,n){return uo.apply(this,arguments)},co=n(461);function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(e,t){return!t||"object"!==so(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ho=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=po(this,(e=fo(t)).call.apply(e,[this].concat(o)))).endpoint="utility",n.InterfaceConstructor=function(e){return new co.Utility.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,Kn),t}()),vo=n(378);function mo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function bo(e){return yo.apply(this,arguments)}function yo(){return(yo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){mo(a,r,o,u,i,"next",e)}function i(e){mo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$n.fromLocator(t);case 3:return n=e.sent,e.next=6,Jt(n,t.authenticationToken);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])}))).apply(this,arguments)}var go=bo;function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ko(e,t,n[t])})}return e}function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Po(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xo(a,r,o,u,i,"next",e)}function i(e){xo(a,r,o,u,i,"throw",e)}u(void 0)})}}function Ro(){return No.apply(this,arguments)}function No(){return(No=Po(regeneratorRuntime.mark(function e(){var t,n,r,o,a,u,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,e.next=4,er.a.getDefaultLocator();case 4:return n=e.sent,r=[],o=[],a=function(){var e=Po(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(vo.d)()){e.next=9;break}return e.next=3,ho.fromLocator(n);case 3:return t=e.sent,e.next=6,Cr(t,n.authenticationToken);case 6:r=e.sent,e.next=15;break;case 9:return e.next=11,$n.fromLocator(n);case 11:return o=e.sent,e.next=14,Dt(o,n.authenticationToken);case 14:r=e.sent;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Po(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,go(n);case 2:o=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i=[a()],t&&i.push(u()),e.next=13,Promise.all(i);case 13:return n.isTrueOwner&&(r=r.map(function(e){return wo({},e,{isTrueOwner:!0})})),Mn.a.publish("notebook","updateNotebooks",{notebooks:r,sharedNotebooks:o}),e.abrupt("return",r);case 18:throw e.prev=18,e.t0=e.catch(1),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,18]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.listShared",bo);var So=Ro;function Oo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function jo(){return Lo.apply(this,arguments)}function Lo(){return(Lo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Oo(a,r,o,u,i,"next",e)}function i(e){Oo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So());case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.list",Ro);var To=jo;function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Io(e,t,n[t])})}return e}function Io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Co(e){return Go.apply(this,arguments)}function Go(){return(Go=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Uo(a,r,o,u,i,"next",e)}function i(e){Uo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.notebook,e.prev=1,null!=n&&null!=r&&null!=r.name){e.next=4;break}throw Error("#createNotebookInWorkspace requires a workspaceGuid and notebook object with a name");case 4:return e.next=6,er.a.getLocationForWorkspaceGuid();case 6:return o=e.sent,e.next=9,$n.fromLocator(o);case 9:return a=e.sent,e.next=12,P(a,Eo({},r,{workspaceGuid:n}),o.authenticationToken);case 12:return u=e.sent,Mn.a.publish("notebook","updateNotebook",{notebook:u}),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0;case 20:case"end":return e.stop()}},e,this,[[1,17]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.bootstrapAllNotebooks",jo);var _o=Co;function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Do(e,t,n[t])})}return e}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Mo(e){return Fo.apply(this,arguments)}function Fo(){return(Fo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ao(a,r,o,u,i,"next",e)}function i(e){Ao(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,$n.fromLocator(n);case 5:return r=e.sent,delete(o=Wo({},t)).guid,e.next=10,P(r,o,n.authenticationToken);case 10:return a=e.sent,Mn.a.publish("notebook","updateNotebook",{notebook:Wo({},a,{isTrueOwner:n.isTrueOwner})}),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.createnotebookinworkspace",Co),Mn.a.register("notebook.actions.createNotebook",Mo);var qo=Mo;function Bo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Vo(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Bo(a,r,o,u,i,"next",e)}function i(e){Bo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return(n=e.sent).personal=!0,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,F(r,t,n.authenticationToken);case 9:Mn.a.publish("linkednotebook","expungeLinkedNotebook",t);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.expungeLinkedNotebook",Vo);var Yo=Vo,Jo=n(371);function Ko(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function zo(e){return Xo.apply(this,arguments)}function Xo(){return(Xo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ko(a,r,o,u,i,"next",e)}function i(e){Ko(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,$n.fromLocator(n);case 5:return r=e.sent,e.next=8,X(r,t,n.authenticationToken);case 8:return o=e.sent,Jo.a.isUpSyncDisabled()&&Mn.a.publish("notebook","expungeNotebook",t),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.expungeNotebookService",zo);var Qo=zo;function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$o(e,t,n[t])})}return e}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ta(e){return na.apply(this,arguments)}function na(){return(na=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ea(a,r,o,u,i,"next",e)}function i(e){ea(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,null!=t){e.next=4;break}throw new Error("#getNotebook Guid is required");case 4:return e.next=6,Mn.a.call("notebook.actions.getnotebook",t);case 6:if(null==(r=e.sent)||n&&!(r.dirtyFlags&&r.dirtyFlags.size>0)){e.next=9;break}return e.abrupt("return",r);case 9:return e.next=11,er.a.getLocationForNotebookGuid(t);case 11:return o=e.sent,e.next=14,$n.fromLocator(o);case 14:return a=e.sent,e.next=17,Ve(a,t,o.authenticationToken);case 17:return u=e.sent,i=Zo({},u,{isTrueOwner:o.isTrueOwner}),Mn.a.publish("notebook","updateNotebook",{notebook:i}),e.abrupt("return",i);case 23:throw e.prev=23,e.t0=e.catch(1),e.t0;case 26:case"end":return e.stop()}},e,this,[[1,23]])}))).apply(this,arguments)}var ra=ta;function oa(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function aa(e){return ua.apply(this,arguments)}function ua(){return(ua=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){oa(a,r,o,u,i,"next",e)}function i(e){oa(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNotebookShares Guid is required");case 2:return e.prev=2,e.next=5,er.a.getLocationForNotebookGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,Je(r,t,n.authenticationToken);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.get",ta);var ia=aa;function ca(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function sa(){return pa.apply(this,arguments)}function pa(){return(pa=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ca(a,r,o,u,i,"next",e)}function i(e){ca(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,$n.fromLocator(t);case 6:return n=e.sent,e.next=9,be(n,t.authenticationToken);case 9:return r=e.sent,Mn.a.publish("notebook","defaultNotebook",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.getnotebookshares",aa);var fa=sa;function la(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ha(){return va.apply(this,arguments)}function va(){return(va=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){la(a,r,o,u,i,"next",e)}function i(e){la(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,$n.fromLocator(t);case 6:return n=e.sent,e.next=9,we(n,t.authenticationToken);case 9:return r=e.sent,Mn.a.publish("notebook","userNotebook",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.getDefaultNotebook",sa);var da=ha;Mn.a.register("notebook.actions.getUserNotebook",ha);var ma=n(381),ba=n(369),ya=n.n(ba),ga=n(22);function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ka(e,t,n[t])})}return e}function ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xa(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xa(a,r,o,u,i,"next",e)}function i(e){xa(a,r,o,u,i,"throw",e)}u(void 0)})}}var Ra=Object(ga.default)("ion:actions:processSyncChunk");function Na(e){return Sa.apply(this,arguments)}function Sa(){return(Sa=Pa(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chunk,r=t.firstUpdateCount,o=t.shouldCatchup,a=void 0===o||o,u=t.locator,e.next=3,Promise.resolve();case 3:if(Ra.log("Processing a sync chunk",n,a),n.expungedNotes&&n.expungedNotes.length>0&&Mn.a.publish("note","expungeNotes",n.expungedNotes),n.expungedNotebooks&&n.expungedNotebooks.length>0&&Mn.a.publish("notebook","expungeNotebooks",n.expungedNotebooks),n.expungedLinkedNotebooks&&n.expungedLinkedNotebooks.length>0&&Mn.a.publish("linkednotebook","expungeLinkedNotebooks",n.expungedLinkedNotebooks),n.expungedTags&&n.expungedTags.length>0&&Mn.a.publish("tag","deleteTags",n.expungedTags),n.expungedWorkspaces&&n.expungedWorkspaces.length>0&&Mn.a.publish("workspace","expungeWorkspaces",n.expungedWorkspaces),n.notesNoLongerSharedWithMe&&n.notesNoLongerSharedWithMe.length>0&&Mn.a.publish("note","expungeNotesNoLongerSharedWithMe",{noteGuids:n.notesNoLongerSharedWithMe}),n.linkedNotebooks&&n.linkedNotebooks.length>0&&Mn.a.publish("linkednotebook","updateLinkedNotebooks",n.linkedNotebooks),n.notes&&n.notes.length>0&&Mn.a.publish("note","updateNotes",{notes:n.notes,resultSpec:new Fn.NoteResultSpec({includeSharedNotes:!0}),locator:u}),i=[],!(n.notebooks&&n.notebooks.length>0)){e.next=17;break}return e.next=16,Promise.all(n.notebooks.map(function(){var e=Pa(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=t.guid,!e.t1){e.next=5;break}return e.next=4,Mn.a.call("notebook.actions.hasnotebook",t.guid);case 4:e.t1=!e.sent;case 5:if(e.t0=e.t1,!e.t0){e.next=8;break}e.t0=a||null!=t.updateSequenceNum&&t.updateSequenceNum>r;case 8:if(!e.t0){e.next=10;break}i.push(t.guid);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 16:n.notebooks?(c=n.notebooks.map(function(e){return wa({},e,{isTrueOwner:u.isTrueOwner,isOwnedByMyVaultUser:!u.personal&&!u.globalId})}),s={notebooks:c,locator:u},Mn.a.publish("notebook","updateNotebooks",s)):Ra.error("notebooks array in sync chunk is removed!");case 17:if(p=[],!(n.workspaces&&n.workspaces.length>0)){e.next=22;break}return e.next=21,Promise.all(n.workspaces.map(function(){var e=Pa(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=t.workspace&&t.workspace.guid,!e.t1){e.next=6;break}return e.next=4,Mn.a.call("notebook.actions.hasnotebooks",t.notebookGuids||[]);case 4:e.t2=e.sent.length,e.t1=e.t2>0;case 6:if(e.t0=e.t1,!e.t0){e.next=9;break}e.t0=a||null!=t.workspace.updateSequenceNum&&t.workspace.updateSequenceNum>r;case 9:if(!e.t0){e.next=11;break}p.push(t.workspace.guid);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 21:Mn.a.publish("workspace","updateWorkspaces",n.workspaces);case 22:return i.length>0&&Mn.a.publish("notebook","needsCatchup",{guids:i,locator:u}),n.preferences&&Mn.a.publish("preference","updatePreferences",{preferences:n.preferences.preferences}),n.tags&&n.tags.length>0&&Mn.a.publish("tag","updateTags",n.tags),Ra.log("Notebooks that need to be caught up:",i),Ra.log("Workspaces that need to be caught up",p),e.abrupt("return",[i,p]);case 28:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Oa=Na;function ja(e){return new Ta(e)}function La(e){var t,n;function r(t,n){try{var a=e[t](n),u=a.value,i=u instanceof Ta;Promise.resolve(i?u.wrapped:u).then(function(e){i?r("next",e):o(a.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(a,u){var i={key:e,arg:o,resolve:a,reject:u,next:null};n?n=n.next=i:(t=n=i,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Ta(e){this.wrapped=e}Mn.a.register("sync.actions.process",Na),"function"==typeof Symbol&&Symbol.asyncIterator&&(La.prototype[Symbol.asyncIterator]=function(){return this}),La.prototype.next=function(e){return this._invoke("next",e)},La.prototype.throw=function(e){return this._invoke("throw",e)},La.prototype.return=function(e){return this._invoke("return",e)};var Ea=Object(ga.default)("ion:actions:linkedNotebookSyncChunkGenerator");function Ia(){return(Ia=function(e){return function(){return new La(e.apply(this,arguments))}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.linkedNotebook,r=t.locator,o=t.afterUSN,a=void 0===o?0:o,u=t.maxEntries,i=void 0===u?255:u,e.prev=1,e.next=4,ja($n.fromLocator(r));case 4:return c=e.sent,e.next=7,ja(Le(c,n,r.authenticationToken));case 7:if(s=e.sent,p=s.updateCount||0,f=p,l=a,!(a>=p)){e.next=14;break}return Ea.log("afterUSN: ".concat(a," has hit or exceeded firstUpdateCount ").concat(p)),e.abrupt("return",Promise.resolve({chunk:null,firstUpdateCount:p}));case 14:if(l===f){e.next=24;break}return e.next=17,ja(Se(c,n,l,i,0===a,null));case 17:return h=e.sent,f=h.updateCount||0,l=h.chunkHighUSN||0,e.next=22,Promise.resolve({chunk:h,firstUpdateCount:p});case 22:e.next=14;break;case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(1),e.t0;case 29:case"end":return e.stop()}},e,this,[[1,26]])}))).apply(this,arguments)}var Ua=function(e){return Ia.apply(this,arguments)};function Ca(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Ga=Object(ga.default)("ion:actions:getLinkedNotebookSyncChunk");function _a(){return(_a=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ca(a,r,o,u,i,"next",e)}function i(e){Ca(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.linkedNotebook,r=t.locator,o=t.afterUSN,a=void 0===o?0:o,u=t.maxEntries,i=Ua({linkedNotebook:n,locator:r,afterUSN:a,maxEntries:void 0===u?255:u});case 2:return e.next=4,i.next();case 4:if(null==(c=e.sent).value){e.next=10;break}if(p=c.value,f=p.chunk,!(null!=(l=p.firstUpdateCount)&&a>=l)){e.next=9;break}return e.abrupt("return",{updateCount:l});case 9:null!=f&&"number"==typeof f.chunkHighUSN?a<f.chunkHighUSN&&(Oa({chunk:f,firstUpdateCount:l,locator:r,shouldCatchup:!1}),s=f.chunkHighUSN):c.done||(Ga.error("Bad linked notebook sync chunk data from generator:",c),null==s&&(s=l));case 10:if(c&&!c.done){e.next=2;break}case 11:return e.abrupt("return",{updateCount:s||0});case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Wa=function(e){return _a.apply(this,arguments)},Da=Object(ga.default)("ion-actions:sync:error"),Aa=function(e){return function(t){Da.error(t),"function"==typeof ProgressEvent&&t instanceof ProgressEvent||("errorCode"in t&&(t.errorCode===ma.EDAMErrorCode.INVALID_AUTH||t.errorCode===ma.EDAMErrorCode.AUTH_EXPIRED)?e.badAuthHandler():"errorCode"in t&&t.errorCode===ma.EDAMErrorCode.PERMISSION_DENIED?e.permissionDeniedHandler():Mn.a.publish("app.service","syncError",{},!1))}};function Ma(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Fa=Object(ga.default)("ion:actions:runLinkedNotebookCycle"),qa=Aa({badAuthHandler:o.e,permissionDeniedHandler:o.e});function Ba(){return(Ba=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ma(a,r,o,u,i,"next",e)}function i(e){Ma(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,er.a.actuallyGetLocationForLinkedNotebookGuid({lnbGuid:t});case 4:e.t0=e.sent;case 5:return r=e.t0,e.next=8,Mn.a.call("linkednotebook.actions.getByGuid",t);case 8:if(null!=(o=e.sent)){e.next=12;break}throw Fa.error("Attempting to runLinkedNotebookCycle without a corresponding lnb",t),Error("Could not find corresponding linkedNotebook ".concat(t));case 12:return e.prev=12,e.t1=Wa,e.t2=o,e.t3=r,e.next=18,Mn.a.call("linkednotebook.actions.getLinkedNotebookUsn",t);case 18:return e.t4=e.sent,e.t5={linkedNotebook:e.t2,locator:e.t3,afterUSN:e.t4,maxEntries:255},e.next=22,(0,e.t1)(e.t5);case 22:a=e.sent,u=a.updateCount,Mn.a.publish("linkednotebook","updateLinkedNotebookUsn",{linkedNotebookGuid:t,updateCount:u}),e.next=30;break;case 27:e.prev=27,e.t6=e.catch(12),qa(e.t6);case 30:case"end":return e.stop()}},e,this,[[12,27]])}))).apply(this,arguments)}var Va=function(e,t){return Ba.apply(this,arguments)};function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ya(e,t,n[t])})}return e}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ja(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ka(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function za(e){return Xa.apply(this,arguments)}function Xa(){return(Xa=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ka(a,r,o,u,i,"next",e)}function i(e){Ka(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,e.prev=1,null!=n){e.next=4;break}throw Error("#getLinkedNotebook requires a guid");case 4:return e.next=6,er.a.actuallyGetLocationForLinkedNotebookGuid({lnbGuid:n});case 6:return r=e.sent,e.next=9,$n.fromLocator(r);case 9:return o=e.sent,e.next=12,ct(o,r.authenticationToken);case 12:if(null!=(a=e.sent).notebookGuid){e.next=15;break}throw Error("#getLinkedNotebook: sharedNotebook.notebookGuid can not be null");case 15:return e.next=17,Ve(o,a.notebookGuid,r.authenticationToken);case 17:if(null!=(u=e.sent).guid){e.next=20;break}throw Error("#getLinkedNotebook: serviceNotebook.guid can not be null");case 20:return e.next=22,yn(o,u.guid,new ba.NotebookRecipientSettings({recipientStatus:ba.RecipientStatus.IN_MY_LIST}));case 22:return i=e.sent,c=function(e,t){var n=e.guid,r=Ja(e,["guid"]),o=t.sharedNotebooks,a=t.sharedNotebookIds;if(null==n)throw Error("invalid service notebook");return Ha({},r,{guid:n,sharedNotebooks:o,sharedNotebookIds:a})}(i,u),s=Ha({},c,{restrictions:u.restrictions,isTrueOwner:r.isTrueOwner,shardIdFromSharedAuth:r.shard||void 0,sharedNotebooks:u.sharedNotebooks}),Mn.a.publish("notebook","updateNotebook",{notebook:s}),Mn.a.publish("linkednotebook","updateLinkedNotebooktoAttachmentMap",{attachmentGuid:s.guid,linkedNotebookGuid:n}),e.next=29,Va(n,r);case 29:return e.abrupt("return",s);case 32:if(e.prev=32,e.t0=e.catch(1),e.t0.errorCode!==ma.EDAMErrorCode.PERMISSION_DENIED&&!e.t0.identifier){e.next=41;break}return e.next=37,Mn.a.call("linkednotebook.actions.hasservicenotebook",n);case 37:return(p=e.sent)&&Mn.a.publish("notebook","expungeNotebook",p),e.next=41,Mn.a.call("notebook.actions.expungeLinkedNotebook",n);case 41:throw e.t0;case 42:case"end":return e.stop()}},e,this,[[1,32]])}))).apply(this,arguments)}var Qa=za;function Za(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("notebook.actions.getlinkednotebook",za);var $a=Object(ga.default)("ion:action:createLinkedNotebook");function eu(){return(eu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Za(a,r,o,u,i,"next",e)}function i(e){Za(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $a.log("creating LinkedNotebook:",t),e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,b(r,t);case 9:return o=e.sent,$a.log("created LinkedNotebook:",o),Mn.a.publish("linkednotebook","updateLinkedNotebook",o),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var tu=function(e){return eu.apply(this,arguments)};function nu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var ru=Object(ga.default)("ion:action:getOrCreateLinkedNotebook");function ou(){return(ou=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){nu(a,r,o,u,i,"next",e)}function i(e){nu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ru.log("gettingOrCreating LinkedNotebook:",t),e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,$e(r,t);case 9:return o=e.sent,ru.log("gotOrCreated LinkedNotebook:",o),Mn.a.publish("linkednotebook","updateLinkedNotebook",o),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var au=function(e){return ou.apply(this,arguments)};function uu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function iu(e){return er.a.newPersonalLocator(!0,e,null)}function cu(e){return su.apply(this,arguments)}function su(){return(su=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){uu(a,r,o,u,i,"next",e)}function i(e){uu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.name,o=t.shardId,null!=n){e.next=3;break}throw new Error("#joinLinkedNotebook requires a notebook guid");case 3:return e.prev=3,a=iu(o),e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,f(u,n,null);case 10:return i=e.sent,e.next=13,ct(u,i.authenticationToken);case 13:return c=e.sent,e.next=16,Mn.a.call("linkednotebook.actions.getFromGlobalId",c.globalId);case 16:if(!((s=e.sent).length>0)){e.next=23;break}return e.next=20,s[0];case 20:e.t0=e.sent,e.next=26;break;case 23:return e.next=25,au({shareName:r,username:i.user?i.user.username:"",shardId:o,sharedNotebookGlobalId:c.globalId});case 25:e.t0=e.sent;case 26:return p=e.t0,l=p.guid||"",e.next=30,Qa({guid:l});case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t1=e.catch(3),e.t1.errorCode!==ma.EDAMErrorCode.PERMISSION_DENIED&&!e.t1.identifier){e.next=43;break}return e.next=38,Mn.a.call("linkednotebook.actions.getlinkednotebookguids",n);case 38:if(h=e.sent,Mn.a.publish("notebook","expungeNotebook",n),!h||!h.length){e.next=43;break}return e.next=43,h.map(function(e){return Mn.a.call("notebook.actions.expungeLinkedNotebook",e)});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,this,[[3,33]])}))).apply(this,arguments)}var pu=cu;Mn.a.register("notebook.actions.joinlinkednotebook",cu);var fu=n(445),lu=n(56),hu=n.n(lu);function vu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function du(){return(du=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vu(a,r,o,u,i,"next",e)}function i(e){vu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","authenticateToBusiness",function(e){return t.authenticateToBusiness(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var mu=function(e,t){return du.apply(this,arguments)};function bu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yu(){return(yu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bu(a,r,o,u,i,"next",e)}function i(e){bu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","getUser",function(e){return t.getUser(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var gu=function(e,t){return yu.apply(this,arguments)};function wu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ku(){return(ku=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){wu(a,r,o,u,i,"next",e)}function i(e){wu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","listBusinessUsers",function(e){return t.listBusinessUsers(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var xu=function(e,t,n){return ku.apply(this,arguments)},Pu=n(678);function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){return!t||"object"!==Ru(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Su(e){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ou(e,t){return(Ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ju=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Nu(this,(e=Su(t)).call.apply(e,[this].concat(o)))).endpoint="edam/user",n.InterfaceConstructor=function(e){return new Pu.UserStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ou(e,t)}(t,Kn),t}());function Lu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Tu(e){return Eu.apply(this,arguments)}function Eu(){return(Eu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Lu(a,r,o,u,i,"next",e)}function i(e){Lu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getBusinessLocator();case 3:return n=e.sent,e.next=6,ju.fromLocator(n);case 6:return r=e.sent,e.next=9,xu(r,t,n.authenticationToken||"");case 9:return o=e.sent,Mn.a.publish("profile","set",o.reduce(function(e,t){return t.id&&(e[t.id]=t),e},{})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}var Iu=Tu;function Uu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Cu(){return(Cu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Uu(a,r,o,u,i,"next",e)}function i(e){Uu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("profile.actions.getbusinessusersupdatecount");case 2:if(!(e.sent<t)){e.next=7;break}return e.next=6,Iu({});case 6:Mn.a.publish("profile","setbusinessusersupdatecount",t);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("user.actions.listBusinessUsers",Tu);var Gu=function(e){return Cu.apply(this,arguments)},_u=n(71),Wu=n(72);function Du(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Au(){return Mu.apply(this,arguments)}function Mu(){return(Mu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Du(a,r,o,u,i,"next",e)}function i(e){Du(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u.a.init();case 2:if(null!=(t=_u.a.getValue("user"))){e.next=5;break}return e.abrupt("return",null);case 5:return(n=new Wu.JSONProtocol).rstack=[JSON.parse(t)],n.rpos=[],e.abrupt("return",ba.User.read(n));case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Fu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var qu=Object(ga.default)("ion:actions:getUser");function Bu(){return Vu.apply(this,arguments)}function Vu(){return(Vu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fu(a,r,o,u,i,"next",e)}function i(e){Fu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=null,e.prev=2,e.next=5,Au();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),qu.warn("failed to deserialize embedded user: ".concat(e.t0));case 11:if(null!=n&&!t){e.next=19;break}return r=er.a.newPersonalLocator(),e.next=15,ju.fromLocator(r);case 15:return o=e.sent,e.next=18,gu(o,r.authenticationToken||"");case 18:n=e.sent;case 19:return Mn.a.publish("user","update",n),e.abrupt("return",n);case 21:case"end":return e.stop()}},e,this,[[2,8]])}))).apply(this,arguments)}var Hu=Bu;function Yu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("user.actions.get",Bu);var Ju=function(e){Mn.a.publish("user","setUserLastUpdated",e),Mn.a.call("crosspromotion.actions.get",!0)};function Ku(e){return zu.apply(this,arguments)}function zu(){return(zu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yu(a,r,o,u,i,"next",e)}function i(e){Yu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t,e.t0){e.next=6;break}return e.next=5,er.a.getDefaultLocator();case 5:e.t0=e.sent;case 6:return n=e.t0,e.next=9,$n.fromLocator(n);case 9:return r=e.sent,e.next=12,ft(r,n.authenticationToken);case 12:return o=e.sent,e.next=15,Mn.a.call("user.actions.getUserLastUpdated");case 15:if(a=e.sent,null!=o.businessUsersUpdateCount&&Gu(o.businessUsersUpdateCount),u=!n.personal||n.personal&&!Object(vo.d)(),!(n.personal&&Object(vo.e)()||n.personal&&!Object(vo.d)())||o.userLastUpdated===a){e.next=23;break}return Ju(o.userLastUpdated),e.next=23,Hu(!0);case 23:return u&&Mn.a.publish("app.progress","syncstate",o),e.abrupt("return",o);case 27:throw e.prev=27,e.t1=e.catch(0),e.t1;case 30:case"end":return e.stop()}},e,this,[[0,27]])}))).apply(this,arguments)}var Xu=Ku;function Qu(e){return new $u(e)}function Zu(e){var t,n;function r(t,n){try{var a=e[t](n),u=a.value,i=u instanceof $u;Promise.resolve(i?u.wrapped:u).then(function(e){i?r("next",e):o(a.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(a,u){var i={key:e,arg:o,resolve:a,reject:u,next:null};n?n=n.next=i:(t=n=i,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function $u(e){this.wrapped=e}Mn.a.register("sync.actions.get",Ku),"function"==typeof Symbol&&Symbol.asyncIterator&&(Zu.prototype[Symbol.asyncIterator]=function(){return this}),Zu.prototype.next=function(e){return this._invoke("next",e)},Zu.prototype.throw=function(e){return this._invoke("throw",e)},Zu.prototype.return=function(e){return this._invoke("return",e)};var ei=Object(ga.default)("ion:actions:filteredSyncChunkGenerator");function ti(){return(ti=function(e){return function(){return new Zu(e.apply(this,arguments))}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.afterUSN,o=void 0===r?0:r,a=t.maxEntries,u=void 0===a?255:a,i=t.syncChunkFilter,e.prev=1,e.t0=n,e.t0){e.next=7;break}return e.next=6,Qu(er.a.getBusinessLocator());case 6:e.t0=e.sent;case 7:return c=e.t0,e.next=10,Qu($n.fromLocator(c));case 10:return s=e.sent,e.next=13,Qu(Xu(c));case 13:if(p=e.sent,f=p.updateCount||0,ei.log("".concat(c.personal?"Personal":"Business"," filteredSyncChunkGenerator")),ei.log("First update count set: ".concat(f)),l=f,h=o,!(o>=f)){e.next=22;break}return ei.log("afterUSN: ".concat(o," has hit or exceed firstUpdateCount ").concat(f)),e.abrupt("return",Promise.resolve({chunk:null,firstUpdateCount:f}));case 22:if(h===l){e.next=32;break}return e.next=25,Qu(Pe(s,h,u,i,c.authenticationToken));case 25:return v=e.sent,l=v.updateCount||0,h=v.chunkHighUSN||0,e.next=30,Promise.resolve({chunk:v,firstUpdateCount:f});case 30:e.next=22;break;case 32:e.next=37;break;case 34:throw e.prev=34,e.t1=e.catch(1),e.t1;case 37:case"end":return e.stop()}},e,this,[[1,34]])}))).apply(this,arguments)}var ni=function(e){return ti.apply(this,arguments)};function ri(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ai(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var ui=Object(ga.default)("ion:actions:getFilteredSyncChunk");function ii(e){return ci.apply(this,arguments)}function ci(){return(ci=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ai(a,r,o,u,i,"next",e)}function i(e){ai(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,m,b,y,g,w,k,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.afterUSN,o=void 0===r?0:r,a=t.maxEntries,u=void 0===a?255:a,i=t.syncChunkFilter,e.prev=1,e.t0=n,e.t0){e.next=7;break}return e.next=6,er.a.getDefaultLocator();case 6:e.t0=e.sent;case 7:c=e.t0,s=ni({locator:c,afterUSN:o,maxEntries:u,syncChunkFilter:i}),p=!c.personal||c.personal&&!Object(vo.d)(),f=p&&!(i.notebookGuids||i.workspaceGuids),l=!(0===o||i.notebookGuids||i.workspaceGuids),h=[];case 13:return e.next=15,s.next();case 15:if(null==(v=e.sent).value){e.next=22;break}if(m=v.value,b=m.chunk,!(null!=(y=m.firstUpdateCount)&&p&&o>=y)){e.next=21;break}return Mn.a.publish("app","synced",!0),e.abrupt("return",{updateCount:y,notebookGuids:[],workspaceGuids:[]});case 21:null!=b&&"number"==typeof b.chunkHighUSN?(o<b.chunkHighUSN&&h.push(Oa({chunk:b,firstUpdateCount:y,locator:c,shouldCatchup:l})),d=b.chunkHighUSN,f&&Mn.a.publish("app.progress","chunk",b.chunkHighUSN)):v.done||(ui.error("Bad sync chunk data from generator:",v),null==d&&(d=y));case 22:if(v&&!v.done){e.next=13;break}case 23:return e.t1=hu.a,e.next=26,Promise.all(h);case 26:return e.t2=e.sent,e.t3=function(e){return hu.a.union.apply(hu.a,ri(e))},g=e.t1.unzip.call(e.t1,e.t2).map(e.t3),w=oi(g,2),k=w[0],x=w[1],e.abrupt("return",{updateCount:d||0,notebookGuids:k,workspaceGuids:x});case 35:throw e.prev=35,e.t4=e.catch(1),e.t4;case 38:case"end":return e.stop()}},e,this,[[1,35]])}))).apply(this,arguments)}var si=ii;function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){fi(e,t,n[t])})}return e}function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("sync.actions.filteredsyncchunk",ii);var hi=Object(ga.default)("ion:actions:catchupSync");function vi(e){return di.apply(this,arguments)}function di(){return(di=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){li(a,r,o,u,i,"next",e)}function i(e){li(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.notebookGuids,o=void 0===r?[]:r,a=t.workspaceGuids,u=void 0===a?[]:a,e.t0=n,e.t0){e.next=6;break}return e.next=5,er.a.getDefaultLocator();case 5:e.t0=e.sent;case 6:if(i=e.t0,c=new Fn.SyncChunkFilter({includeNotes:!0,includeSharedNotes:!0,includeWorkspacesContent:!0,includeNotebooks:!0}),s=[],e.prev=9,!o.length){e.next=15;break}return hi.log("Catching up Notebooks: ".concat(o.toString())),e.next=14,si({locator:i,syncChunkFilter:pi({},c,{notebookGuids:o})});case 14:Mn.a.publish("notebook","didCatchup",o);case 15:e.next=36;break;case 17:e.prev=17,e.t1=e.catch(9),hi.log("Catching up failed for notebookGuids: ".concat(o.toString(),", retrying individually")),p=0;case 21:if(!(p<o.length)){e.next=36;break}return e.prev=22,f=o[p],hi.log("Catching up Notebook: ".concat(f)),e.next=27,si({locator:i,syncChunkFilter:pi({},c,{notebookGuids:[f]})});case 27:Mn.a.publish("notebook","didCatchup",[f]),e.next=33;break;case 30:e.prev=30,e.t2=e.catch(22),s.push(e.t2);case 33:p++,e.next=21;break;case 36:if(e.prev=36,!u.length){e.next=41;break}return e.next=40,si({locator:i,syncChunkFilter:pi({},c,{includeWorkspaces:!0,workspaceGuids:u})});case 40:Mn.a.publish("workspace","didCatchup",u);case 41:e.next=62;break;case 43:e.prev=43,e.t3=e.catch(36),hi.log("Catching up failed for workspaceGuids: ".concat(u.toString(),", retrying individually")),l=0;case 47:if(!(l<u.length)){e.next=62;break}return e.prev=48,h=u[l],hi.log("Catching up Space: ".concat(h)),e.next=53,si({locator:i,syncChunkFilter:pi({},c,{includeWorkspaces:!0,workspaceGuids:[h]})});case 53:Mn.a.publish("workspace","didCatchup",[h]),e.next=59;break;case 56:e.prev=56,e.t4=e.catch(48),s.push(e.t4);case 59:l++,e.next=47;break;case 62:if(!(s.length>0)){e.next=66;break}throw hi.log("Multiple errors detected in catchupSync, attempting to throw",s),Object(fu.sendException)({message:"Multiple errors detected in catchupSync ".concat(JSON.stringify(s)),callstack:JSON.stringify(s[0].stack),fatal:!1}),s;case 66:case"end":return e.stop()}},e,this,[[9,17],[22,30],[36,43],[48,56]])}))).apply(this,arguments)}var mi=vi;function bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yi(e,t,n[t])})}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function wi(e){return ki.apply(this,arguments)}function ki(){return(ki=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gi(a,r,o,u,i,"next",e)}function i(e){gi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.userId,e.prev=1,null!=n){e.next=4;break}throw new Error("#joinNotebook requires a notebook guid");case 4:return e.next=6,Mn.a.call("notebook.actions.hasnotebook",n);case 6:return o=e.sent,e.next=9,er.a.getLocationForNotebookGuid(n);case 9:if(a=e.sent,!o){e.next=22;break}return e.next=13,Mn.a.call("notebook.actions.getnotebook",n);case 13:if(!(u=e.sent).recipientSettings||u.recipientSettings.recipientStatus===ba.RecipientStatus.NOT_IN_MY_LIST){e.next=22;break}if(!(u.published&&u.sharedNotebooks&&u.sharedNotebooks.find(function(e){return null!=r&&r===e.recipientUserId}))){e.next=21;break}return e.next=18,or({notebookGuid:n,notebookIdentifier:n,shardId:a.shard||""});case 18:return a.authenticationToken=e.sent,e.next=21,mi({locator:a,notebookGuids:[n]});case 21:return e.abrupt("return",null);case 22:return a.personal=!0,e.next=25,$n.fromLocator(a);case 25:return i=e.sent,e.next=28,yn(i,n,new ba.NotebookRecipientSettings({recipientStatus:ba.RecipientStatus.IN_MY_LIST}));case 28:if(null!=(c=e.sent).guid){e.next=31;break}throw new Error("malformed notebook returned from service");case 31:return e.next=33,er.a.getLocationForNotebook(bi({},c,{guid:c.guid}));case 33:return s=e.sent,e.next=36,mi({locator:s,notebookGuids:[n]});case 36:return e.abrupt("return",null);case 39:throw e.prev=39,e.t0=e.catch(1),e.t0;case 42:case"end":return e.stop()}},e,this,[[1,39]])}))).apply(this,arguments)}Mn.a.register("sync.actions.catchup",vi);var xi=wi;function Pi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ri(e){return Ni.apply(this,arguments)}function Ni(){return(Ni=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Pi(a,r,o,u,i,"next",e)}function i(e){Pi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#leaveNotebook requires a notebook guid");case 2:return e.next=4,Mn.a.call("notebook.actions.getparentworkspace",t);case 4:if(null==e.sent){e.next=7;break}throw new Error("Cannot leave a notebook that is in a workspace");case 7:return e.next=9,er.a.getLocationForNotebookGuid(t);case 9:return(n=e.sent).personal=!0,e.next=13,$n.fromLocator(n);case 13:return r=e.sent,e.next=16,yn(r,t,new ba.NotebookRecipientSettings({recipientStatus:ba.RecipientStatus.NOT_IN_MY_LIST}));case 16:return Mn.a.publish("notebook","expungeNotebook",t),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.joinnotebook",wi);var Si=Ri;function Oi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ji(){return Li.apply(this,arguments)}function Li(){return(Li=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Oi(a,r,o,u,i,"next",e)}function i(e){Oi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,$n.fromLocator(t);case 6:return n=e.sent,e.next=9,Gt(n,t.authenticationToken);case 9:return r=e.sent,Mn.a.publish("linkednotebook","updateLinkedNotebooks",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.leavenotebook",Ri);var Ti,Ei=ji;function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Gi(e,t,n[t])})}return e}function Ui(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ci(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ui(a,r,o,u,i,"next",e)}function i(e){Ui(a,r,o,u,i,"throw",e)}u(void 0)})}}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Mn.a.register("linkednotebook.actions.list",ji);var _i=Object(ga.default)("ion:action:manageNotebookShares"),Wi=(Gi(Ti={},ya.a.SharedNotebookPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY,Fn.ShareRelationshipPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY),Gi(Ti,ya.a.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,Fn.ShareRelationshipPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY),Gi(Ti,ya.a.SharedNotebookPrivilegeLevel.FULL_ACCESS,Fn.ShareRelationshipPrivilegeLevel.FULL_ACCESS),Gi(Ti,ya.a.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS,Fn.ShareRelationshipPrivilegeLevel.FULL_ACCESS),Ti);function Di(e,t,n,r){return Ai.apply(this,arguments)}function Ai(){return(Ai=Ci(regeneratorRuntime.mark(function e(t,n,r,o){var a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?Object.keys(n).map(function(e){return parseInt(e,10)}):[],e.next=3,o.reduce(function(){var e=Ci(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("identity.actions.getidentitiesforuser",n);case 2:return r=e.sent,e.next=5,t;case 5:return e.t0=r.map(function(e){return e.id}),e.abrupt("return",e.sent.concat(e.t0));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(r));case 3:u=e.sent,t.sharedNotebooks=t.sharedNotebooks&&t.sharedNotebooks.filter(function(e){return!(e.recipientIdentityId&&u.includes(e.recipientIdentityId))}).map(function(e){var t=e.recipientUserId;if(null!=t&&a.includes(t)){var r=Ii({},e);return r.privilege=n[t].priv,r}return e}),Mn.a.publish("notebook","updateNotebook",{notebook:t});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Mi(e){return Object.keys(e).map(function(t){var n=e[t].priv,r=Wi[n];return{recipientUserId:parseInt(t,10),individualPrivilege:r,displayName:null,bestPrivilege:null,restrictions:null,sharerUserId:null}})}function Fi(e,t){var n=e.map(function(e){return{type:ba.UserIdentityType.IDENTITYID,longIdentifier:e}});return t.map(function(e){return n.push({type:ba.UserIdentityType.EVERNOTE_USERID,longIdentifier:e})}),n}function qi(e){return Bi.apply(this,arguments)}function Bi(){return(Bi=Ci(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebook,r=t.usersToModify,o=void 0===r?{}:r,a=t.invitesToRemove,u=void 0===a?[]:a,i=t.sharesToRemove,c=void 0===i?[]:i,e.prev=1,e.next=4,er.a.getLocationForNotebook(n);case 4:return s=e.sent,e.next=7,$n.fromLocator(s);case 7:return p=e.sent,f=Mi(o),l=Fi(u,c),h=new Fn.ManageNotebookSharesParameters({notebookGuid:n.guid,membershipsToUpdate:f,unshares:l,inviteMessage:null}),e.next=13,nn(p,h,s.authenticationToken);case 13:if(!(v=e.sent).errors){e.next=16;break}throw v.errors;case 16:return e.next=18,Di(n,o,u,c);case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach(function(e){e.notFoundException&&_i.error(e.notFoundException),e.userException&&_i.error(e.userException)}):_i.error(e.t0),e.t0;case 25:case"end":return e.stop()}},e,this,[[1,21]])}))).apply(this,arguments)}var Vi=qi;function Hi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yi(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Hi(a,r,o,u,i,"next",e)}function i(e){Hi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#moveNotebookToAccount requires a notebook guid");case 2:return e.next=4,er.a.getDefaultLocator();case 4:return n=e.sent,e.next=7,ho.fromLocator(n);case 7:return r=e.sent,e.next=10,Br(r,t,n.authenticationToken);case 10:return mi({locator:n,notebookGuids:[t]}),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.managenotebookshares",qi);var Ki=Yi;function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Xi(e,t,n[t])})}return e}function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Zi(e){return $i.apply(this,arguments)}function $i(){return($i=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qi(a,r,o,u,i,"next",e)}function i(e){Qi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,o=t.recipientSettings,e.prev=1,null!=n){e.next=4;break}throw Error("#setNotebookRecipientSettings requires a guid");case 4:return e.next=6,er.a.getPersonalLocator();case 6:return a=e.sent,e.next=9,er.a.getLocationForNotebookGuid(n);case 9:return u=e.sent,e.t0=r,e.next=13,$n.fromLocator(er.a.newInstance(zi({},a,{shard:u.shard})));case 13:return e.t1=e.sent,e.t2=n,e.t3=o,e.t4=a.authenticationToken,e.next=19,e.t0.setNotebookRecipientSettings.call(e.t0,e.t1,e.t2,e.t3,e.t4);case 19:return e.t5=r,e.next=22,$n.fromLocator(u);case 22:return e.t6=e.sent,e.t7=n,e.t8=u.authenticationToken,e.next=27,e.t5.getNotebook.call(e.t5,e.t6,e.t7,e.t8);case 27:return i=e.sent,Mn.a.publish("notebook","updateNotebook",{notebook:i}),e.abrupt("return",i);case 32:throw e.prev=32,e.t9=e.catch(1),e.t9;case 35:case"end":return e.stop()}},e,this,[[1,32]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.movetoaccount",Yi);var ec=Zi;function tc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function nc(e){return rc.apply(this,arguments)}function rc(){return(rc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){tc(a,r,o,u,i,"next",e)}function i(e){tc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userIds,r=t.notebookGuid,o=t.permLevel,e.prev=1,null!=r){e.next=4;break}throw Error("#shareNotebook requires a guid");case 4:return a=[],hu.a.uniq(n).map(function(e){return a.push(new ba.Contact({id:String(e),type:Number.isNaN(Number(e))?ba.ContactType.EMAIL:ba.ContactType.EVERNOTE}))}),e.next=8,Mn.a.call("notebook.actions.getnotebook",r);case 8:return u=e.sent,e.next=11,er.a.getLocationForNotebook(u);case 11:return i=e.sent,e.next=14,$n.fromLocator(i);case 14:return c=e.sent,s=new Fn.NotebookShareTemplate({notebookGuid:r,recipientContacts:a,privilege:o}),e.next=18,S(c,s,i.authenticationToken);case 18:return e.next=20,Mn.a.call("threads.actions.sendmessage",{userIds:n,message:"<msg></msg>",attachment:u,isExternal:null!=i.globalId||!Object(vo.d)()});case 20:return e.next=22,ra(r,!0);case 22:e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(1),e.t0;case 27:case"end":return e.stop()}},e,this,[[1,24]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.setNotebookRecipientSettings",Zi);var oc=nc;function ac(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function uc(e){return ic.apply(this,arguments)}function ic(){return(ic=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ac(a,r,o,u,i,"next",e)}function i(e){ac(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebook,r=t.userId,e.next=3,er.a.getLocationForNotebook(n);case 3:return o=e.sent,e.next=6,$n.fromLocator(o);case 6:return a=e.sent,u=n.guid,e.next=10,S(a,{notebookGuid:u,recipientThreadId:null,recipientContacts:[{id:r,type:ba.ContactType.EVERNOTE}],privilege:ya.a.SharedNotebookPrivilegeLevel.FULL_ACCESS});case 10:return e.prev=10,i=er.a.newPersonalLocator(o.sharedToMe,o.shard,o.authenticationToken),e.next=14,$n.fromLocator(i);case 14:if(c=e.sent,s={recipientStatus:ya.a.RecipientStatus.IN_MY_LIST},null==u){e.next=21;break}return e.next=19,f(c,u);case 19:return e.next=21,yn(c,u,s);case 21:return p=er.a.newDefaultLocator(o.sharedToMe,o.shard,o.authenticationToken),e.next=24,$n.fromLocator(p);case 24:if(l=e.sent,null==u){e.next=30;break}return e.next=28,Ve(l,u);case 28:h=e.sent,Mn.a.publish("service.notebook","joinnotebooksuccess",h);case 30:e.next=36;break;case 32:throw e.prev=32,e.t0=e.catch(10),Mn.a.publish("service.notebook","joinnotebookfailure"),e.t0;case 36:case"end":return e.stop()}},e,this,[[10,32]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.sharenotebook",nc);var cc=uc;function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){pc(e,t,n[t])})}return e}function pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function lc(e){return hc.apply(this,arguments)}function hc(){return(hc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fc(a,r,o,u,i,"next",e)}function i(e){fc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=null,o=!0,null!=n){e.next=5;break}throw Error("#updateNotebook requires a guid");case 5:return e.next=7,Mn.a.call("notebook.actions.getnotebook",n);case 7:return a=e.sent,e.next=10,er.a.getLocationForNotebook(a);case 10:return u=e.sent,e.next=13,$n.fromLocator(u);case 13:if(i=e.sent,!t.isRenamed||!t.name){e.next=21;break}return e.next=17,ln(i,n,t.name,u.authenticationToken);case 17:r=e.sent,delete t.isRenamed,delete t.name,Object.keys(t).length<=1&&(o=!1);case 21:if(!o){e.next=26;break}return c=sc({},a,t),e.next=25,Tn(i,c,u.authenticationToken);case 25:r=e.sent;case 26:if(!Jo.a.isUpSyncDisabled()){e.next=31;break}return e.next=29,Ve(i,n,u.authenticationToken);case 29:s=e.sent,Mn.a.publish("notebook","updateNotebook",{notebook:s});case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("notebook.actions.sharenotebooktoself",uc);var vc=lc;function dc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function mc(){return bc.apply(this,arguments)}function bc(){return(bc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){dc(a,r,o,u,i,"next",e)}function i(e){dc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=er.a.newPersonalLocator(),e.next=4,ju.fromLocator(t);case 4:return n=e.sent,e.next=7,mu(n,t.authenticationToken);case 7:return(r=e.sent)&&r.user&&Mn.a.publish("user","setvaultuser",r.user),e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("notebook.actions.updateservice",lc);var yc=mc;function gc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function wc(){return kc.apply(this,arguments)}function kc(){return(kc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gc(a,r,o,u,i,"next",e)}function i(e){gc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getPersonalLocator();case 2:return t=e.sent,e.next=5,ho.fromLocator(t);case 5:return n=e.sent,r=new co.TierSelectionDisplayEligibilityRequest,e.abrupt("return",xr(n,r));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("user.actions.authToBusiness",mc);var xc=wc;function Pc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Rc(){return(Rc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Pc(a,r,o,u,i,"next",e)}function i(e){Pc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","createMessageThread",function(e){return t.createMessageThread(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("user.actions.gettsdeligibility",wc);var Nc=function(e,t,n){return Rc.apply(this,arguments)};function Sc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Oc(){return(Oc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Sc(a,r,o,u,i,"next",e)}function i(e){Sc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","getMessageSyncChunk",function(e){return t.getMessageSyncChunk(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var jc=function(e,t,n){return Oc.apply(this,arguments)};function Lc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Tc(){return(Tc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Lc(a,r,o,u,i,"next",e)}function i(e){Lc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","getThreads",function(e){return t.getThreads(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ec=function(e,t){return Tc.apply(this,arguments)};function Ic(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Uc(){return(Uc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ic(a,r,o,u,i,"next",e)}function i(e){Ic(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","sendMessageToThread",function(e){return t.sendMessageToThread(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Cc=function(e,t,n){return Uc.apply(this,arguments)},Gc=n(462);function _c(e){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wc(e,t){return!t||"object"!==_c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dc(e){return(Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mc=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Wc(this,(e=Dc(t)).call.apply(e,[this].concat(o)))).endpoint="messagestore",n.InterfaceConstructor=function(e){return new Gc.MessageStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ac(e,t)}(t,Kn),t}());function Fc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qc(){return Bc.apply(this,arguments)}function Bc(){return(Bc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fc(a,r,o,u,i,"next",e)}function i(e){Fc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,Mc.fromLocator(t);case 6:return n=e.sent,e.next=9,Ec(n,t.authenticationToken);case 9:return r=e.sent,Mn.a.publish("identity","set",r.identities),Mn.a.publish("service.threads","update",r.threads),e.abrupt("return",r);case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}var Vc=qc;function Hc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yc(){return Jc.apply(this,arguments)}function Jc(){return(Jc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Hc(a,r,o,u,i,"next",e)}function i(e){Hc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,ho.fromLocator(t);case 6:return n=e.sent,e.next=9,Nr(n,t.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("user.actions.getThreadsAndIdentities",qc);var Kc=Yc;function zc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Xc(){return Qc.apply(this,arguments)}function Qc(){return(Qc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){zc(a,r,o,u,i,"next",e)}function i(e){zc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,ho.fromLocator(t);case 6:return n=e.sent,e.next=9,to(n,t.authenticationToken);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,11]])}))).apply(this,arguments)}Mn.a.register("user.actions.getRestrictions",Yc);var Zc=Xc;function $c(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function es(e){return ts.apply(this,arguments)}function ts(){return(ts=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$c(a,r,o,u,i,"next",e)}function i(e){$c(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,nt(r,t,n.authenticationToken);case 9:return o=e.sent,Mn.a.publish("preference","updatePreferences",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("user.actions.sendVerificationEmail",Xc);var ns=es;function rs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function os(e){return as.apply(this,arguments)}function as(){return(as=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rs(a,r,o,u,i,"next",e)}function i(e){rs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.preferencesToUpdate,r=t.preferenceNames,e.prev=1,e.next=4,er.a.getPersonalLocator();case 4:return o=e.sent,e.next=7,$n.fromLocator(o);case 7:return a=e.sent,e.next=10,Un(a,n);case 10:return e.next=12,nt(a,r,o.authenticationToken);case 12:return u=e.sent,Mn.a.publish("preference","updatePreferences",u),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0;case 20:case"end":return e.stop()}},e,this,[[1,17]])}))).apply(this,arguments)}Mn.a.register("preference.actions.get",es);var us=os;function is(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cs(e){return ss.apply(this,arguments)}function ss(){return(ss=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){is(a,r,o,u,i,"next",e)}function i(e){is(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,ho.fromLocator(n);case 6:return r=e.sent,e.next=9,gr(r,t);case 9:return o=e.sent,Mn.a.publish("promotion","updatePromotions",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("preference.actions.update",os);var ps=cs;function fs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ls(e){return hs.apply(this,arguments)}function hs(){return(hs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fs(a,r,o,u,i,"next",e)}function i(e){fs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,ho.fromLocator(n);case 6:return r=e.sent,e.next=9,Yr(r,t);case 9:Mn.a.publish("promotion","updatePromotions",[{promotionId:t,optedOut:!0}]),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("promotion.actions.get",cs);var vs=ls;function ds(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ms(e){return bs.apply(this,arguments)}function bs(){return(bs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ds(a,r,o,u,i,"next",e)}function i(e){ds(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,ho.fromLocator(n);case 6:return r=e.sent,e.next=9,zr(r,t);case 9:return o=e.sent,Mn.a.publish("promotion","updatePromotions",o),e.abrupt("return",o);case 14:if(e.prev=14,e.t0=e.catch(0),2!==e.t0.errorCode){e.next=18;break}throw new Error("promotionIds are limited to 32 chars.");case 18:throw e.t0;case 19:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("promotion.actions.optout",ls);var ys=ms;function gs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ws(){return ks.apply(this,arguments)}function ks(){return(ks=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gs(a,r,o,u,i,"next",e)}function i(e){gs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o,a,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]&&u[0],e.prev=1,e.next=4,Mn.a.call("promotion.actions.getCrossPromotionInfo");case 4:if(null==(n=e.sent)||t){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,er.a.getPersonalLocator();case 9:return r=e.sent,e.next=12,ho.fromLocator(r);case 12:return o=e.sent,e.next=15,mr(o,r.authenticationToken);case 15:return a=e.sent,Mn.a.publish("promotion","updateCrossPromotions",a),e.abrupt("return",a);case 20:throw e.prev=20,e.t0=e.catch(1),e.t0;case 23:case"end":return e.stop()}},e,this,[[1,20]])}))).apply(this,arguments)}Mn.a.register("promotion.actions.show",ms);var xs=ws;function Ps(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Rs(e){return Ns.apply(this,arguments)}function Ns(){return(Ns=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ps(a,r,o,u,i,"next",e)}function i(e){Ps(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#acquireNoteLock Guid is required");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,c(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}Mn.a.register("crosspromotion.actions.get",ws);var Ss=Rs;function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){js(e,t,n[t])})}return e}function js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ts(e,t){return Es.apply(this,arguments)}function Es(){return(Es=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ls(a,r,o,u,i,"next",e)}function i(e){Ls(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getLocationForNoteGuid(t);case 2:return r=e.sent,e.next=5,ho.fromLocator(r);case 5:return o=e.sent,e.abrupt("return",ir(o,new ba.Resource(Os({},n,{noteGuid:t})),r.authenticationToken));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("note.actions.lock.acquire",Rs);var Is=Ts;Mn.a.register("note.actions.addResourceToNote",function(e){return Ts(e.noteGuid,e.resource)});var Us=n(383),Cs=n.n(Us),Gs=n(365);function _s(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Ws=Cs.a.EDAM_NOTE_TITLE_LEN_MAX;function Ds(e){return As.apply(this,arguments)}function As(){return(As=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_s(a,r,o,u,i,"next",e)}function i(e){_s(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.noteGuid,r=t.notebookGuid,o=t.noteTitle,null!=n&&null!=r){e.next=3;break}throw new Error("#copyNote requires a noteGuid and a notebookGuid");case 3:return e.prev=3,e.next=6,er.a.getLocationForNoteGuid(n);case 6:return a=e.sent,e.next=9,$n.fromLocator(a);case 9:return u=e.sent,e.next=12,v(u,n,r,a.authenticationToken);case 12:if((i=e.sent).title=o.slice(0,Ws),c=i.guid){e.next=17;break}throw new Error("service did not return a guid.  This should never happen");case 17:return Mn.a.publish("note","updateNote",{note:i,locator:a}),e.next=20,Gs.a.updateNote({guid:c,title:i.title});case 20:return s=e.sent,e.abrupt("return",s);case 24:throw e.prev=24,e.t0=e.catch(3),e.t0;case 27:case"end":return e.stop()}},e,this,[[3,24]])}))).apply(this,arguments)}var Ms=Ds;function Fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qs(e,t,n[t])})}return e}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Vs(e){return Hs.apply(this,arguments)}function Hs(){return(Hs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Bs(a,r,o,u,i,"next",e)}function i(e){Bs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==t.content&&(t.content='<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note></en-note>'),n=Date.now(),t.created=t.created||n,t.updated=t.updated||n,t.attributes=t.attributes||new ba.NoteAttributes,null==t.attributes){e.next=16;break}if(t.attributes.noteTitleQuality=Us.EDAM_NOTE_TITLE_QUALITY_UNTITLED,null!=t.attributes.author){e.next=16;break}return e.next=11,Mn.a.call("user.actions.getactiveuser");case 11:if(r=e.sent){e.next=14;break}throw new Error("no user???");case 14:o=Fs({},t.attributes,{author:r.name}),t.attributes=o;case 16:if(e.prev=16,null!=(u=t.notebookGuid)){e.next=20;break}throw new Error("no notebookguid provided");case 20:return e.next=22,Mn.a.call("notebook.actions.getnotebook",u);case 22:return i=e.sent,e.next=25,er.a.getLocationForNotebook(i);case 25:a=e.sent,e.next=33;break;case 28:return e.prev=28,e.t0=e.catch(16),e.next=32,er.a.getDefaultLocator();case 32:a=e.sent;case 33:return e.next=35,$n.fromLocator(a);case 35:return c=e.sent,e.next=38,w(c,t,a.authenticationToken);case 38:return s=e.sent,Mn.a.publish("note","updateNote",{note:s,locator:a}),e.abrupt("return",s);case 43:throw e.prev=43,e.t1=e.catch(0),e.t1;case 46:case"end":return e.stop()}},e,this,[[0,43],[16,28]])}))).apply(this,arguments)}Mn.a.register("note.actions.copy",Ds);var Ys=Vs;function Js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ks(e,t,n[t])})}return e}function Ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("note.actions.create",Vs);var Xs=new Fn.NotesMetadataResultSpec({includeTagGuids:!0,includeTitle:!0,includeUpdated:!0,includeDeleted:!0,includeNotebookGuid:!0,includeAttributes:!0,includeUpdateSequenceNum:!0});function Qs(e){return Zs.apply(this,arguments)}function Zs(){return(Zs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){zs(a,r,o,u,i,"next",e)}function i(e){zs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=t.offset,o=void 0===r?0:r,a=t.maxNotes,u=void 0===a?128:a,i=t.resultSpec,c=void 0===i?Xs:i,e.prev=1,e.next=4,er.a.getLocationForNoteFilter(n);case 4:if(null!=(s=e.sent)){e.next=7;break}throw new Error("Shard Locator not found for scope ".concat(n.scope));case 7:return e.next=9,$n.fromLocator(s);case 9:return p=e.sent,e.next=12,ce(p,n,o,u,c,s.authenticationToken);case 12:return f=e.sent,(l=f&&f.notes)&&(h=l.map(function(e){var t=hu.a.omit(e,["largestResourceMime","largestResourceSize"]);return new ba.Note(Js({},t,{active:!t.deleted}))}),Mn.a.publish("note","updateNotes",{notes:h,locator:s,resultSpec:c})),e.abrupt("return",f);case 18:throw e.prev=18,e.t0=e.catch(1),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,18]])}))).apply(this,arguments)}var $s=Qs;Mn.a.register("note.actions.findNotesMetadata",Qs);var ep=n(368);function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){np(e,t,n[t])})}return e}function np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var op=Object(ga.default)("ion:actions:getNote");function ap(e){return up.apply(this,arguments)}function up(){return(up=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rp(a,r,o,u,i,"next",e)}function i(e){rp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.resultSpec,o=void 0===r?new Fn.NoteResultSpec:r,a=t.forceFetch,u=void 0!==a&&a,null!=n){e.next=3;break}throw new Error("#getNote Guid is required");case 3:return e.next=5,Mn.a.call("note.datasource.getnote",n);case 5:if(i=e.sent,null==i||i&&(null==i.content||i.stale)&&o.includeContent||u){e.next=10;break}return op.log("Returning localNote %o",i),e.abrupt("return",i);case 10:return e.next=12,er.a.getLocationForNoteGuid(n);case 12:return c=e.sent,e.next=15,$n.fromLocator(c);case 15:return s=e.sent,e.next=18,Fe(s,n,o,c.authenticationToken).catch(function(e){throw(e.errorCode===ma.EDAMErrorCode.PERMISSION_DENIED||e.identifier)&&(op.error("Permission denied: expunging note guid: ".concat(n)),Mn.a.publish("note","expungeNote",n)),e});case 18:if((p=e.sent).shard=c.shard||"",Mn.a.publish("note","updateNote",{note:tp({},p,{shardId:c.shard}),resultSpec:o,locator:c}),e.t1=Jo.a.isBootstrappingEnabled(),!e.t1){e.next=26;break}return e.next=25,Mn.a.call("attachments.actions.getattachment",p.guid);case 25:e.t1=e.sent;case 26:if(e.t0=e.t1,!e.t0){e.next=31;break}return e.next=30,Mn.a.call("notebook.actions.hasnotebook",p.notebookGuid);case 30:e.t0=e.sent;case 31:if(!e.t0){e.next=35;break}return op.log("Fetching notebook in getNote because serviceNote is not an attachment, and we are in bootstrappingView"),e.next=35,Mn.a.call("notebook.actions.get",p.notebookGuid);case 35:return Jo.a.isBootstrappingEnabled()&&window.parent!==window&&localStorage.removeItem(ep.w),e.abrupt("return",p);case 37:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ip=ap;Mn.a.register("note.actions.getNote",ap);var cp=n(407);function sp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var pp=Object(ga.default)("ion:action:createNoteShare");function fp(e){return lp.apply(this,arguments)}function lp(){return(lp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){sp(a,r,o,u,i,"next",e)}function i(e){sp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.share,e.prev=1,r=[],hu.a.uniq(n.userIds).map(function(e){return r.push(new ba.Contact({id:String(e),type:Number.isNaN(Number(e))?ba.ContactType.EMAIL:ba.ContactType.EVERNOTE}))}),o=new Fn.SharedNoteTemplate({noteGuid:n.note.guid,recipientContacts:r,privilege:n.permLevel}),e.next=7,er.a.getLocationForNote(n.note);case 7:return a=e.sent,e.next=10,$n.fromLocator(a);case 10:return u=e.sent,e.next=13,L(u,o,a.authenticationToken);case 13:if(e.t0=Mn.a,e.t1=n.userIds,e.t2=n.note,e.t3=null!=a.globalId||!Object(vo.d)(),e.t3){e.next=21;break}return e.next=20,Object(cp.e)(n.note.guid);case 20:e.t3=e.sent;case 21:return e.t4=e.t3,e.t5={userIds:e.t1,message:"<msg></msg>",attachment:e.t2,isExternal:e.t4},e.next=25,e.t0.call.call(e.t0,"threads.actions.sendmessage",e.t5);case 25:if(!n.note.guid){e.next=28;break}return e.next=28,ip({guid:n.note.guid,resultSpec:new Fn.NoteResultSpec({includeSharedNotes:!0}),forceFetch:!0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t6=e.catch(1),pp.error(e.t6),e.t6;case 34:case"end":return e.stop()}},e,this,[[1,30]])}))).apply(this,arguments)}Mn.a.register("note.actions.createNoteShare",fp);var hp=fp;function vp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var dp=100;function mp(e){return bp.apply(this,arguments)}function bp(){return(bp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vp(a,r,o,u,i,"next",e)}function i(e){vp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getPersonalLocator();case 2:return n=e.sent,e.next=5,$n.fromLocator(n);case 5:r=e.sent,o=null,a=0,u=hu.a.chunk(t,dp),i=!0,c=!1,s=void 0,e.prev=12,p=u[Symbol.iterator]();case 14:if(i=(f=p.next()).done){e.next=23;break}return l=f.value,e.next=18,J(r,l,n.authenticationToken);case 18:o=e.sent,a++;case 20:i=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),c=!0,s=e.t0;case 29:e.prev=29,e.prev=30,i||null==p.return||p.return();case 32:if(e.prev=32,!c){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return Jo.a.isUpSyncDisabled()&&Mn.a.publish("note","expungeNotes",t),e.abrupt("return",{lastServerUsn:o,completedServiceCalls:a});case 39:case"end":return e.stop()}},e,this,[[12,25,29,37],[30,,32,36]])}))).apply(this,arguments)}Mn.a.register("note.actions.expungeNotesService",mp);var yp=mp;function gp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function wp(e){return kp.apply(this,arguments)}function kp(){return(kp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gp(a,r,o,u,i,"next",e)}function i(e){gp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNoteLockStatus Guid is required");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,Ge(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}var xp=wp;Mn.a.register("note.actions.lock.status",wp);var Pp=n(671);function Rp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Np(e){return Sp.apply(this,arguments)}function Sp(){return(Sp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Rp(a,r,o,u,i,"next",e)}function i(e){Rp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ip({guid:t,resultSpec:new Fn.NoteResultSpec({includeContent:!0}),forceFetch:!0});case 2:return n=e.sent,e.next=5,Object(Pp.createResourceMapAsync)(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Op=Np;function jp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Lp(e){return Tp.apply(this,arguments)}function Tp(){return(Tp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){jp(a,r,o,u,i,"next",e)}function i(e){jp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNoteShares Guid is required");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,Xe(r,t);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Mn.a.register("note.actions.getnoteresourcemap",Np);var Ep=Lp;function Ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Up(e,t,n[t])})}return e}function Up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Gp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function _p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Gp(a,r,o,u,i,"next",e)}function i(e){Gp(a,r,o,u,i,"throw",e)}u(void 0)})}}Mn.a.register("note.actions.getnoteshares",Lp);var Wp=75;function Dp(e){return Ap.apply(this,arguments)}function Ap(){return(Ap=_p(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guids,r=t.isVaryingOrigin,o=void 0!==r&&r,e.prev=1,0!==n.length){e.next=4;break}return e.abrupt("return",null);case 4:if(a={},!o){e.next=13;break}return e.next=8,Promise.all(n.map(function(){var e=_p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,er.a.getLocationForNoteGuid(t);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 8:e.t0=function(e,t){var n=Cp(t,2),r=n[0],o=n[1],a="".concat(o.shard||"","_").concat(o.personal?"P":"B");return null==e[a]&&(e[a]={notes:[],locator:o}),e[a].notes.push(r),e},e.t1=a,e.sent.reduce(e.t0,e.t1),e.next=17;break;case 13:return e.next=15,er.a.getLocationForNoteGuid(n[0]);case 15:(u=e.sent).shard&&(a[u.shard]={notes:n,locator:u});case 17:return e.next=19,Promise.all(Object.values(a).map(function(){var e=_p(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notes,r=t.locator,e.next=3,$n.fromLocator(r);case 3:return o=e.sent,e.t0=hu.a,e.next=7,Promise.all(hu.a.chunk(n,Us.EDAM_SNIPPETS_NOTES_MAX).map(function(){var e=_p(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(o,t,Wp,r.authenticationToken);case 2:return n=e.sent,e.next=5,Mn.a.call("note.actions.getall");case 5:return a=e.sent,e.abrupt("return",Object.keys(n).reduce(function(e,t){var r=n[t].substring(0,Wp);r.length===Wp&&(r+="");var o=a[t];return null!=o&&e.push(Ip({},o,{snippet:r})),e},[]));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 7:e.t1=e.sent,e.t2=[e.t1],a=e.t0.flatten.call(e.t0,e.t2),u=Cp(a,1),i=u[0],Mn.a.publish("note","updateNotes",{notes:i,locator:r});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 19:return e.abrupt("return",null);case 22:throw e.prev=22,e.t2=e.catch(1),e.t2;case 25:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}var Mp=Dp;function Fp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("note.actions.getsnippets",Dp);var qp=Object(ga.default)("ion:actions:manageNoteShares");function Bp(e){var t=[];return e&&(t=Object.keys(e).map(function(t){var n=e[t].priv;return{recipientUserId:parseInt(t,10),privilege:n,displayName:null,restrictions:null,sharerUserId:null}})),t}function Vp(e){return Hp.apply(this,arguments)}function Hp(){return(Hp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fp(a,r,o,u,i,"next",e)}function i(e){Fp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.note,r=t.usersToModify,o=t.sharesToRemove,a=t.invitesToRemove,e.prev=1,null!=(u=n.guid)){e.next=5;break}throw new Error("note requires a guid in #manageNoteShares");case 5:return e.next=7,er.a.getLocationForNote(n);case 7:return i=e.sent,e.next=10,$n.fromLocator(i);case 10:return c=e.sent,s=Bp(r),p=new Fn.ManageNoteSharesParameters({noteGuid:u,membershipsToUpdate:s,membershipsToUnshare:o,invitationsToUnshare:a}),e.next=15,an(c,p,i.authenticationToken);case 15:if(!((f=e.sent).errors&&f.errors.length>0)){e.next=18;break}throw f.errors;case 18:return e.next=20,ip({guid:u,forceFetch:!0,resultSpec:new Fn.NoteResultSpec({includeSharedNotes:!0})});case 20:e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach(function(e){e.notFoundException&&qp.error(e.notFoundException),e.userException&&qp.error(e.userException)}):qp.error(e.t0),e.t0;case 26:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}var Yp=Vp;function Jp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Kp(e){return zp.apply(this,arguments)}function zp(){return(zp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Jp(a,r,o,u,i,"next",e)}function i(e){Jp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#releaseNoteLock Guid is required");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,sn(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}Mn.a.register("note.actions.managenoteshares",Vp);var Xp=Kp;Mn.a.register("note.actions.lock.release",Kp);var Qp=n(661),Zp=n(446);function $p(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ef(e){return tf.apply(this,arguments)}function tf(){return(tf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$p(a,r,o,u,i,"next",e)}function i(e){$p(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Mn.a.publish("note","selectNote",{guid:t}),null!=t){e.next=3;break}return e.abrupt("return",null);case 3:return n=new Fn.NoteResultSpec({includeAccountLimits:!0,includeContent:!0,includeSharedNotes:!0}),e.next=6,ip({guid:t,resultSpec:n,forceFetch:"web"===Zp.a.platformName});case 6:return r=e.sent,e.prev=7,e.next=10,ra(r.notebookGuid,!Object(Qp.a)());case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[7,12]])}))).apply(this,arguments)}var nf=ef;function rf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function of(e){return af.apply(this,arguments)}function af(){return(af=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rf(a,r,o,u,i,"next",e)}function i(e){rf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#shareNote requires a guid");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,kn(r,t,n.authenticationToken);case 11:return o=e.sent,e.next=14,ip({guid:t,resultSpec:new Fn.NoteResultSpec({includeSharedNotes:!0}),forceFetch:!0});case 14:return e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(2),e.t0;case 20:case"end":return e.stop()}},e,this,[[2,17]])}))).apply(this,arguments)}Mn.a.register("note.actions.select",ef);var uf=of;function cf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function sf(e){return pf.apply(this,arguments)}function pf(){return(pf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){cf(a,r,o,u,i,"next",e)}function i(e){cf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#stopSharingNote requires a guid");case 2:return e.prev=2,e.next=5,er.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,Rn(r,t,n.authenticationToken);case 11:return e.next=13,ip({guid:t,forceFetch:!0});case 13:return e.abrupt("return",null);case 16:throw e.prev=16,e.t0=e.catch(2),e.t0;case 19:case"end":return e.stop()}},e,this,[[2,16]])}))).apply(this,arguments)}Mn.a.register("note.actions.share",of);var ff=sf;Mn.a.register("note.actions.stopsharing",sf);var lf=n(485);function hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function df(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vf(a,r,o,u,i,"next",e)}function i(e){vf(a,r,o,u,i,"throw",e)}u(void 0)})}}function mf(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yf(e,t,n[t])})}return e}function yf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gf=Object(ga.default)("ion:action:updateNote"),wf=["attributes","created","notebookGuid","sharedNotes","tagGuids","tagNames","title","active","deleted"],kf=["author","reminderDoneTime","reminderOrder","reminderTime","shareDate","sharedWithBusiness","sourceURL"],xf={};function Pf(e,t,n,r){var o=bf({},t);e.attributes&&o.attributes&&(o.attributes=bf({},e.attributes,o.attributes)),Object.assign(e,hu.a.omitBy(o,hu.a.isUndefined),{resources:null}),n.sharedToMe&&!r&&delete e.tagGuids}function Rf(e,t){return new co.ResourcesUpdateRequest({deactivateResourcesWithBodyHashes:[].concat(mf(e.deactivateResourcesWithBodyHashes||[]),mf(t.deactivateResourcesWithBodyHashes||[])),activateResourcesWithBodyHashes:[].concat(mf(e.activateResourcesWithBodyHashes||[]),mf(t.activateResourcesWithBodyHashes||[]))})}function Nf(e){return Sf.apply(this,arguments)}function Sf(){return(Sf=df(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("note.datasource.getnote",t);case 2:return n=e.sent,e.next=5,Mn.a.call("notebook.actions.hasnotebook",n.notebookGuid);case 5:if(!e.sent){e.next=11;break}return e.next=9,Mn.a.call("notebook.actions.getnotebook",n.notebookGuid);case 9:return r=e.sent,e.abrupt("return",r.restrictions&&!r.restrictions.noUpdateNotes||!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Of(e){return jf.apply(this,arguments)}function jf(){return(jf=df(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(e,t){return function(){var n=Tf({noteChanges:e,resourcesUpdateRequest:t}),r=n.then(u,u);return xf[a]={nextChanges:{},nextResourcesUpdate:{},inFlightRequest:r},n}},u=function(){xf[a].nextRequest||delete xf[a]},n=t.noteChanges,r=t.resourcesUpdateRequest,o=void 0===r?new co.ResourcesUpdateRequest:r,gf.log("updateNote called with:",n,o),null!=(a=n.guid)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("#updateNote requires a guid")));case 7:if(!xf[a]){e.next=19;break}return c=xf[a],e.next=11,er.a.getLocationForNoteGuid(a);case 11:return s=e.sent,e.next=14,Nf(a);case 14:return p=e.sent,Pf(c.nextChanges,n,s,p),c.nextResourcesUpdate=Rf(c.nextResourcesUpdate,o),c.nextRequest||(c.nextRequest=c.inFlightRequest.then(i(c.nextChanges,c.nextResourcesUpdate))),e.abrupt("return",c.nextRequest);case 19:return e.abrupt("return",i(n,o)());case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Lf=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sentNote=void 0,this.locator=void 0,this.updateTags=void 0,this.sentUpdatedWinsData=void 0,this.resourcesUpdateRequest=void 0,this.MAX_ATTEMPTS=4,this.sentNote=t,this.locator=n,this.updateTags=r,this.sentUpdatedWinsData=o,this.resourcesUpdateRequest=a}return function(e,t,n){t&&hf(e.prototype,t),n&&hf(e,n)}(e,[{key:"isEligibleForUpdatedWins",value:function(e){var t=this.sentUpdatedWinsData,n=t.updatedWinsAttributes,r=t.updatedWinsFields;return(0!==n.length||0!==r.length)&&(null!=e.updated&&null!=this.sentNote.updated&&e.updated<this.sentNote.updated)}},{key:"retryUpdatedWins",value:function(){var e=df(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pf(n=bf({},t),hu.a.pick(this.sentNote,this.sentUpdatedWinsData.updatedWinsFields),this.locator,this.updateTags),gf.log("retrying updateNoteIfUsnMatches with fields where updatedTimestamp wins.",n),e.next=5,ho.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,oo(r,n,new co.ResourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - updated wins retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:if(gf.log("publishing to datasource",a),Mn.a.publish("note","updateNote",{note:a,locator:this.locator}),!(this.sentUpdatedWinsData.notUpdatedWinsFields.length>0||this.sentUpdatedWinsData.notUpdatedWinsAttributes.length>0)){e.next=18;break}throw new Error("did not update everything we wanted");case 18:return e.abrupt("return",{updated:!0,serviceNote:a});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isEligibleForContent",value:function(e){if(null==e.contentHash||null==this.sentNote.contentHash)return!1;if(Object(lf.hashify)(e.contentHash)!==Object(lf.hashify)(this.sentNote.contentHash||""))return!1;var t=this.sentUpdatedWinsData.changeKeys.filter(function(e){return"guid"!==e});return 1===t.length&&"content"===t[0]}},{key:"retryContent",value:function(){var e=df(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pf(n=bf({},t),{content:this.sentNote.content},this.locator,this.updateTags),gf.log("Retry content update with",n),e.next=5,ho.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,oo(r,n,this.resourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - content retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:return u=bf({},a,{content:n.content}),gf.log("publishing note content update to dataSource",u),Mn.a.publish("note","updateNote",{note:u,resultSpec:new Fn.NoteResultSpec({includeContent:!0}),locator:this.locator}),e.abrupt("return",{updated:!0,serviceNote:u});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isEligibleForResources",value:function(){var e=this.resourcesUpdateRequest,t=e.activateResourcesWithBodyHashes,n=e.deactivateResourcesWithBodyHashes;return null!=t&&t.length>0||null!=n&&n.length>0}},{key:"retryResources",value:function(){var e=df(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pf(n=bf({},t,{resources:null}),{},this.locator,this.updateTags),gf.log("resending resource update request",n,this.resourcesUpdateRequest),e.next=5,ho.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,oo(r,n,this.resourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - resource retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:return gf.log("publishing note update to dataSource",a),Mn.a.publish("note","updateNote",{note:a,locator:this.locator}),e.abrupt("return",{updated:!0,serviceNote:a});case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRetryStrategies",value:function(e){var t=this;return[{isEligible:function(){return t.isEligibleForUpdatedWins(e)},retryUpdate:function(){return t.retryUpdatedWins(e)}},{isEligible:function(){return t.isEligibleForContent(e)},retryUpdate:function(){return t.retryContent(e)}},{isEligible:function(){return t.isEligibleForResources()},retryUpdate:function(){return t.retryResources(e)}}]}},{key:"redactContent",value:function(e){return bf({},e,{content:null!=e.content?"REDACTED FOR PRIVACY":null})}},{key:"logErrorWithState",value:function(e,t){gf.error(e,"lastServiceNote:",this.redactContent(t),"sentNote:",this.redactContent(this.sentNote),"locator:",this.locator,"updateTags:",this.updateTags,"sentUpdatedWinsData:",this.sentUpdatedWinsData,"resourcesUpdateRequest:",this.resourcesUpdateRequest)}},{key:"retryInternal",value:function(){var e=df(regeneratorRuntime.mark(function e(t,n){var r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>=this.MAX_ATTEMPTS)){e.next=3;break}throw this.logErrorWithState("Exceeded retry limit - this should never happen.",t),new Error("Got USN errors for ".concat(n," update retries in a row"));case 3:r=this.getRetryStrategies(t),o=0;case 5:if(!(o<r.length)){e.next=17;break}if(!(a=r[o]).isEligible()){e.next=14;break}return e.next=10,a.retryUpdate();case 10:if((u=e.sent).updated){e.next=13;break}return e.abrupt("return",this.retryInternal(u.serviceNote,n+1));case 13:return e.abrupt("return",u.serviceNote);case 14:o++,e.next=5;break;case 17:throw this.logErrorWithState("Unable to retry update for an unknown reason.",t),new Error("note is ineligible for update retry");case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"retry",value:function(e){return this.retryInternal(e,0)}}]),e}();function Tf(e){return Ef.apply(this,arguments)}function Ef(){return(Ef=df(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,m,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.noteChanges,r=t.resourcesUpdateRequest,e.prev=1,null!=(o=n.guid)){e.next=5;break}throw new Error("guid is required when updating note");case 5:return a=Object.keys(n).filter(function(e){return null!=n[e]}),u=Object.keys(n.attributes||{}),i={changeKeys:a,updatedWinsFields:hu.a.intersection(a,wf),updatedWinsAttributes:hu.a.intersection(u,kf),notUpdatedWinsFields:hu.a.difference(a,[].concat(wf,["guid"])),notUpdatedWinsAttributes:hu.a.difference(u,kf)},e.next=10,Mn.a.call("note.datasource.getnote",o);case 10:return c=e.sent,e.next=13,Nf(o);case 13:return s=e.sent,e.next=16,er.a.getLocationForNote(c);case 16:return p=e.sent,e.next=19,ho.fromLocator(p);case 19:return f=e.sent,Pf(l=bf({},c),n,p,s),l.updated=Date.now(),c.stale&&null!=l.content&&(gf.warn("Skipping content update because note is stale"),delete l.content),gf.log("updateNoteIfUsnMatches with",l,r),e.next=27,oo(f,l,r,p.authenticationToken);case 27:if(null!=(h=e.sent).note){e.next=30;break}throw new Error("note is undefined - after initial update");case 30:if(v=h.note,h.updated){e.next=36;break}return d=new Lf(l,p,s,i,r),e.next=35,d.retry(v);case 35:return e.abrupt("return",e.sent);case 36:return m=bf({},v,{content:n.content||null}),b=new Fn.NoteResultSpec({includeContent:null!=n.content}),gf.log("publishing note update",m,b),Mn.a.publish("note","updateNote",{note:m,resultSpec:b,locator:p}),e.abrupt("return",m);case 43:throw e.prev=43,e.t0=e.catch(1),gf.error("error in performUpdate:",e.t0),e.t0;case 47:case"end":return e.stop()}},e,this,[[1,43]])}))).apply(this,arguments)}var If=Of;function Uf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Cf(e){return Gf.apply(this,arguments)}function Gf(){return(Gf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Uf(a,r,o,u,i,"next",e)}function i(e){Uf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.guid,r=t.lockState,e.prev=1,Mn.a.publish("note","updateLock",{guid:n,lockState:r}),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),e.t0;case 8:case"end":return e.stop()}},e,this,[[1,5]])}))).apply(this,arguments)}Mn.a.register("note.actions.update",Of);var _f=Cf;function Wf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Df(){return Af.apply(this,arguments)}function Af(){return(Af=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Wf(a,r,o,u,i,"next",e)}function i(e){Wf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,$n.fromLocator(t);case 6:return n=e.sent,e.next=9,Xt(n,t.authenticationToken);case 9:return r=e.sent,Mn.a.publish("tag","updateTags",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("note.actions.lock.update",Cf);var Mf=Df;function Ff(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qf(e){return Bf.apply(this,arguments)}function Bf(){return(Bf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ff(a,r,o,u,i,"next",e)}function i(e){Ff(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter,r=t.notebookGuid,e.prev=1,!r){e.next=8;break}return e.next=5,er.a.getLocationForNotebookGuid(r);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,er.a.getDefaultLocator();case 10:e.t0=e.sent;case 11:return o=e.t0,e.next=14,$n.fromLocator(o);case 14:return a=e.sent,e.next=17,ve(a,n,o.authenticationToken);case 17:return u=e.sent,o.globalId?Mn.a.publish("tag","countSharedTags",{noteCollection:u,notebookGuid:r}):Mn.a.publish("tag","countTag",u),e.abrupt("return",u);case 22:throw e.prev=22,e.t1=e.catch(1),e.t1;case 25:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}Mn.a.register("tag.actions.list",Df);var Vf=qf;function Hf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yf(){return Jf.apply(this,arguments)}function Jf(){return(Jf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Hf(a,r,o,u,i,"next",e)}function i(e){Hf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mf();case 3:return t=e.sent,e.next=6,Vf({filter:new Fn.NoteFilter({tagGuids:t.map(function(e){return e.guid||""})})});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,8]])}))).apply(this,arguments)}Mn.a.register("tag.actions.count",qf);var Kf=Yf;function zf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Xf(e){return Qf.apply(this,arguments)}function Qf(){return(Qf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){zf(a,r,o,u,i,"next",e)}function i(e){zf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,G(r,t,n.authenticationToken);case 9:return o=e.sent,Mn.a.publish("tag","updateTag",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("tag.actions.bootstrap",Yf);var Zf=Xf;function $f(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function el(e){return tl.apply(this,arguments)}function tl(){return(tl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$f(a,r,o,u,i,"next",e)}function i(e){$f(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,$n.fromLocator(n);case 5:return r=e.sent,e.next=8,ne(r,t,n.authenticationToken);case 8:return o=e.sent,Jo.a.isUpSyncDisabled()&&Mn.a.publish("tag","deleteTag",t),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("tag.actions.create",Xf);var nl=el;function rl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ol(e){return al.apply(this,arguments)}function al(){return(al=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rl(a,r,o,u,i,"next",e)}function i(e){rl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getLocationForNotebookGuid(t);case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,$t(r,t,n.authenticationToken);case 9:return o=e.sent,Mn.a.publish("tag","updateSharedTags",{tags:o,guid:t}),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("tag.actions.deleteService",el);var ul=ol;function il(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cl(e){return sl.apply(this,arguments)}function sl(){return(sl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){il(a,r,o,u,i,"next",e)}function i(e){il(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,An(r,t,n.authenticationToken);case 9:if(null==e.sent){e.next=13;break}return e.next=13,Mn.a.publish("tag","updateTag",t);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}Mn.a.register("tag.actions.listTagsByNotebook",ol);var pl=cl;Mn.a.register("tag.actions.update",cl);var fl=n(397);function ll(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var hl={includeInvitations:!1,includeIdentityByInvitationsGuid:!1,includeMemberships:!1,includeWorkspaceRestrictions:!1,includeNotebookGuids:!0,includeAccessInfo:!1,includeNotebookRestrictions:!1,includeDiscoverableWorkspaces:!1,includeAggregations:!1};function vl(e){return dl.apply(this,arguments)}function dl(){return(dl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ll(a,r,o,u,i,"next",e)}function i(e){ll(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.responseSpec,null!=n){e.next=3;break}throw new Error("#getWorkspace workspace guid is required");case 3:return e.prev=3,e.next=6,er.a.getLocationForWorkspaceGuid();case 6:return o=e.sent,e.next=9,ho.fromLocator(o);case 9:return a=e.sent,u=new fl.WorkspaceResponseSpec(r||hl),e.next=13,jr(a,n,u,o.authenticationToken);case 13:return i=e.sent,i.workspace&&Mn.a.publish("workspace","updateWorkspace",i),e.abrupt("return",i);case 19:throw e.prev=19,e.t0=e.catch(3),e.t0;case 22:case"end":return e.stop()}},e,this,[[3,19]])}))).apply(this,arguments)}var ml=vl;function bl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yl(e){return gl.apply(this,arguments)}function gl(){return(gl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bl(a,r,o,u,i,"next",e)}function i(e){bl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.membershipsToUpdate,o=t.invitationsToCreateOrUpdate,a=t.membershipsToRemove,null!=n){e.next=3;break}throw new Error("workspaceGuid is required to #manageWorkspaceSharing calls.");case 3:return e.next=5,er.a.getLocationForWorkspaceGuid();case 5:return u=e.sent,e.next=8,ho.fromLocator(u);case 8:return i=e.sent,e.next=11,Mr(i,new fl.ManageWorkspaceSharingRequest({workspaceGuid:n,membershipsToUpdate:r,invitationsToCreateOrUpdate:o,membershipsToRemove:a}),u.authenticationToken);case 11:if(!1!==e.sent.containsNoErrors){e.next=14;break}throw new Error("Workspace sharing was not updated");case 14:return e.next=16,ml({guid:n,responseSpec:{includeInvitations:!0,includeMemberships:!0}});case 16:c=e.sent,Mn.a.publish("workspace","updateWorkspace",c);case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("workspace.actions.get",vl);var wl=yl;function kl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xl(e){return Pl.apply(this,arguments)}function Pl(){return(Pl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){kl(a,r,o,u,i,"next",e)}function i(e){kl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.userIds,o=t.privilegeLevel,null!=n){e.next=3;break}throw new Error("workspaceGuid is required for #addUsersToWorkspace");case 3:if(null!=o){e.next=5;break}throw new Error("privilegeLevel is required for #addUsersToWorkspace");case 5:return e.next=7,Mn.a.call("identity.actions.getidentitiesforusers",r);case 7:return a=e.sent,u=a.map(function(e){return new fl.WorkspaceInvitation({workspaceGuid:n,privilege:o,contact:e.contact})}),e.next=11,wl({workspaceGuid:n,invitationsToCreateOrUpdate:u});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("workspace.actions.managesharing",yl);var Rl=xl;function Nl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sl(e){return Ol.apply(this,arguments)}function Ol(){return(Ol=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Nl(a,r,o,u,i,"next",e)}function i(e){Nl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceResponse,e.prev=1,!n.notebookGuids){e.next=12;break}if(!(r=n.workspace)||!r.guid){e.next=12;break}return o=r.guid,e.next=9,er.a.getLocationForWorkspaceGuid();case 9:return a=e.sent,e.next=12,mi({locator:a,workspaceGuids:[o]});case 12:return e.abrupt("return",null);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.addusers",xl);var jl=Sl;function Ll(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Tl(e){return El.apply(this,arguments)}function El(){return(El=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ll(a,r,o,u,i,"next",e)}function i(e){Ll(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#bootstrapWorkspace Guid is required");case 2:return e.prev=2,e.next=5,ml({guid:t,responseSpec:{includeInvitations:!1,includeIdentityByInvitationsGuid:!1,includeMemberships:!0,includeWorkspaceRestrictions:!1,includeNotebookGuids:!0,includeAccessInfo:!0,includeNotebookRestrictions:!0,includeDiscoverableWorkspaces:!1,includeAggregations:!1}});case 5:return n=e.sent,e.next=8,jl({workspaceResponse:n});case 8:return e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,this,[[2,11]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.getcontent",Sl);var Il=Tl;function Ul(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Cl(){return Gl.apply(this,arguments)}function Gl(){return(Gl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ul(a,r,o,u,i,"next",e)}function i(e){Ul(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,ho.fromLocator(t);case 6:return n=e.sent,r=new fl.WorkspaceResponseSpec({includeAccessInfo:!0,includeMemberships:!0,includeNotebookGuids:!0,includeWorkspaceRestrictions:!0}),e.next=10,Wr(n,r,new fl.WorkspaceFilter,t.authenticationToken);case 10:o=e.sent,Mn.a.publish("workspace","updateWorkspaces",o),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.bootstrap",Tl);var _l=Cl;function Wl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Dl(e){return Al.apply(this,arguments)}function Al(){return(Al=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Wl(a,r,o,u,i,"next",e)}function i(e){Wl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,ho.fromLocator(n);case 5:return r=e.sent,e.next=8,pr(r,t,n.authenticationToken);case 8:if(o=e.sent,a=o.guid,u=o.backingNotebookGuid,!a||!u){e.next=18;break}return e.next=13,ml({guid:a,responseSpec:{includeMemberships:!0,includeWorkspaceRestrictions:!0,includeAccessInfo:!0}});case 13:return i=e.sent,Mn.a.publish("workspace","updateWorkspace",i),e.next=17,ra(u);case 17:return e.abrupt("return",a);case 18:throw new Error("malformed workspace returned from createWorkspace");case 19:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("workspace.actions.bootstrapWorkspaces",Cl);var Ml=Dl;function Fl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("workspace.actions.create",Dl);var ql=Object(ga.default)("ion:actions:leaveWorkspace");function Bl(e){return Vl.apply(this,arguments)}function Vl(){return(Vl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fl(a,r,o,u,i,"next",e)}function i(e){Fl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#leaveWorkspace requires a workspaceGuid");case 2:return ql.log("#leaveWorkspace called w/ guid",t),e.next=5,er.a.getLocationForWorkspaceGuid();case 5:return n=e.sent,e.next=8,ho.fromLocator(n);case 8:return r=e.sent,e.next=11,Mn.a.call("notebook.actions.getWorkspaceToNotebookGuids");case 11:return o=e.sent,e.next=14,Promise.all((o.getValuesAsArray(t)||[]).map(function(e){return Mn.a.call("notebook.actions.getnotebook",e)}));case 14:return a=e.sent,u=a.filter(function(e){return null==e.sharedNotebooks}).map(function(e){return e.guid}),ql.log("notebooks to be expunged:",u),e.next=19,Er(r,t,n.authenticationToken);case 19:Mn.a.publish("notebook","expungeNotebooks",u),Mn.a.publish("workspace","expungeWorkspace",t);case 21:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Hl=Bl;function Yl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Jl(e){return Kl.apply(this,arguments)}function Kl(){return(Kl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yl(a,r,o,u,i,"next",e)}function i(e){Yl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.userIds,null!=n){e.next=3;break}throw new Error("workspaceGuid is required for #removeUsersFromWorkspace");case 3:return e.next=5,Mn.a.call("workspace.actions.getworkspaceresponse",n);case 5:if(o=e.sent,!(a=o.memberships)){e.next=11;break}return u=a.filter(function(e){return null!=e.common&&null!=e.common.recipientId&&r.includes(e.common.recipientId)}).map(function(e){return e.common&&e.common.guid}).filter(function(e){return null!=e}),e.next=11,wl({workspaceGuid:n,membershipsToRemove:u});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("workspace.actions.leaveservice",Bl);var zl=Jl;Mn.a.register("workspace.actions.removeusers",Jl);var Xl=n(662);function Ql(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Zl(e){return $l.apply(this,arguments)}function $l(){return($l=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ql(a,r,o,u,i,"next",e)}function i(e){Ql(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("workspace.actions.getworkspaceresponse",t);case 2:if(n=e.sent,!Object(Xl.isSeen)(n.accessInfo)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,er.a.getLocationForWorkspaceGuid();case 7:return r=e.sent,e.next=10,ho.fromLocator(r);case 10:return o=e.sent,e.next=13,Zr(o,t,r.authenticationToken);case 13:return Mn.a.publish("workspace","updateWorkspace",{workspaceGuid:t,accessInfo:new fl.AccessInfo({viewed:!0})}),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var eh=Zl;function th(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function nh(e){return rh.apply(this,arguments)}function rh(){return(rh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){th(a,r,o,u,i,"next",e)}function i(e){th(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.guid){e.next=3;break}throw new Error("workspace guid is required for #updateWorkspace");case 3:return e.next=5,er.a.getLocationForWorkspaceGuid();case 5:return n=e.sent,e.next=8,ho.fromLocator(n);case 8:return r=e.sent,e.next=11,io(r,new fl.Workspace(t),n.authenticationToken);case 11:return o=e.sent,Mn.a.publish("workspace","updateWorkspace",{workspace:o}),e.abrupt("return",o.updateSequenceNum||null);case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("workspace.actions.see",Zl);var oh=nh;function ah(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function uh(e){return ih.apply(this,arguments)}function ih(){return(ih=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ah(a,r,o,u,i,"next",e)}function i(e){ah(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.updateVersion,o=t.shouldUpdateLocalState,e.prev=1,e.next=4,er.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,bt(u,new Fn.GetWorkspaceUserInterfacePropertiesRequest({workspaceGuid:n,updateVersion:r}),a.authenticationToken);case 10:return i=e.sent,!1!==o&&i&&i.updateVersion&&r<i.updateVersion&&Mn.a.publish("workspace","setWorkspaceUserInterfaceProperties",{guid:n,workspaceUserInterfaceProperties:i}),e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.updateService",nh);var ch=uh;function sh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ph(e){return fh.apply(this,arguments)}function fh(){return(fh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){sh(a,r,o,u,i,"next",e)}function i(e){sh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.layoutStyle,o=t.updateVersion,e.prev=1,e.next=4,er.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,wt(u,n,r,a.authenticationToken);case 10:Gs.a.getWorkspaceUserInterfaceProperties(n,o),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.getWorkspaceUserInterfaceProperties",uh);var lh=ph;function hh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function vh(e){return dh.apply(this,arguments)}function dh(){return(dh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){hh(a,r,o,u,i,"next",e)}function i(e){hh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.noteDisplayOrder,o=t.updateVersion,e.prev=1,e.next=4,er.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,Pt(u,n,r,a.authenticationToken);case 10:Gs.a.getWorkspaceUserInterfaceProperties(n,o),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.setWorkspaceUserInterfaceLayoutStyle",ph);var mh=vh;function bh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yh(e){return gh.apply(this,arguments)}function gh(){return(gh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bh(a,r,o,u,i,"next",e)}function i(e){bh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.notebookDisplayOrder,o=t.updateVersion,e.prev=1,e.next=4,er.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,Nt(u,n,r,a.authenticationToken);case 10:return e.next=12,ch({workspaceGuid:n,updateVersion:o});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}},e,this,[[1,14]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.setNoteUserInterfaceDisplayOrder",vh);var wh=yh;function kh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xh(e){return Ph.apply(this,arguments)}function Ph(){return(Ph=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){kh(a,r,o,u,i,"next",e)}function i(e){kh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.updatedColors,o=t.updateVersion,e.prev=1,e.next=4,er.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,$n.fromLocator(a);case 7:return u=e.sent,e.next=10,Lt(u,n,r,a.authenticationToken);case 10:ch({workspaceGuid:n,updateVersion:o}),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Mn.a.register("workspace.actions.setNotebookUserInterfaceDisplayOrder",yh);var Rh=xh;function Nh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Sh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("workspace.actions.setNotebookUserInterfaceColors",xh);var Oh=Object(ga.default)("ion:actions:catchupStragglers");function jh(){return Lh.apply(this,arguments)}function Lh(){return(Lh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Sh(a,r,o,u,i,"next",e)}function i(e){Sh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("notebook.actions.getCatchupNotebooks");case 2:return t=e.sent,e.next=5,Mn.a.call("workspace.actions.getCatchupGuids");case 5:return n=e.sent,e.next=8,er.a.getDefaultLocator();case 8:if(r=e.sent,!n.length){e.next=18;break}return e.prev=10,e.next=13,mi({locator:r,workspaceGuids:n});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),Oh.error("catchup failed for workspaces",e.t0);case 18:return o=t.map(function(e){return[e.guid,new er.a(e.personal,e.sharedToMe,e.shard)]}).reduce(function(e,t){var n=Nh(t,2),r=n[0],o=n[1],a="".concat(o.shard||"","_").concat(o.personal?"P":"B");return null==e[a]&&(e[a]={nbs:[],locator:o}),e[a].nbs.push(r),e},{}),e.prev=19,e.next=22,Promise.all(Object.keys(o).map(function(e){var t=o[e],n=t.nbs,r=t.locator;return mi({locator:r,notebookGuids:n})}));case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(19),Oh.error("catchup failed for notebooks",e.t1);case 27:case"end":return e.stop()}},e,this,[[10,15],[19,24]])}))).apply(this,arguments)}var Th=jh;function Eh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ih(e){return Uh.apply(this,arguments)}function Uh(){return(Uh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Eh(a,r,o,u,i,"next",e)}function i(e){Eh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,vt(r,t);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}Mn.a.register("sync.actions.catchupstragglers",jh);var Ch=Ih;Mn.a.register("sync.actions.getWithMetrics",Ih);var Gh=n(447),_h=n(387),Wh=Symbol("The application needs to restart sync");function Dh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ah(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dh(a,r,o,u,i,"next",e)}function i(e){Dh(a,r,o,u,i,"throw",e)}u(void 0)})}}var Mh=Object(ga.default)("ion:sugar:upsync");function Fh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(n&&n<=0||t.sharedToMe)){var o=t.personal?"PERSONAL_USN":"BUSINESS_USN";if(n===e[o]+r)e[o]=n;else if(n&&n>e[o])throw Wh}}function qh(e){return Bh.apply(this,arguments)}function Bh(){return(Bh=Ah(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vh(t);case 2:return e.next=4,Kh(t);case 4:return e.next=6,ov(t);case 6:return e.next=8,Zh(t);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Vh(e){return Hh.apply(this,arguments)}function Hh(){return(Hh=Ah(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("tag.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,Yh(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,er.a.getDefaultLocator();case 13:i=e.sent,Fh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Yh(e,t){return Jh.apply(this,arguments)}function Jh(){return(Jh=Ah(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,!n.isDeleted){e.next=8;break}return e.next=5,Mn.a.call("tag.actions.deleteService",t);case 5:r=e.sent,e.next=9;break;case 8:Mh.error("trying to upsync edited tag ".concat(t,", but editing tags is not supported in Ion"));case 9:return e.next=11,Mn.a.call("tag.actions.cleardirty",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Mh.error("could not upsync tag ".concat(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}function Kh(e){return zh.apply(this,arguments)}function zh(){return(zh=Ah(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("notebook.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,Xh(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,er.a.getLocationForNotebookGuid(a);case 13:i=e.sent,Fh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Xh(e,t){return Qh.apply(this,arguments)}function Qh(){return(Qh=Ah(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,!n.isDeleted){e.next=8;break}return e.next=5,Mn.a.call("notebook.actions.expungeNotebookService",t);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,Mn.a.call("notebook.actions.updateservice",n);case 10:r=e.sent;case 11:return e.next=13,Mn.a.call("notebook.actions.cleardirty",t);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Mh.error("could not upsync notebook ".concat(t));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}function Zh(e){return $h.apply(this,arguments)}function $h(){return($h=Ah(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("note.actions.getdirty");case 2:n=e.sent,r=[],o=[],Object.keys(n).forEach(function(e){var t=n[e];t.isDeleted?r.push(e):o.push(t)}),a=0;case 7:if(!(a<o.length)){e.next=14;break}return u=o[a],e.next=11,ev(u);case 11:a++,e.next=7;break;case 14:if(!(r.length>0)){e.next=25;break}return e.next=17,nv(r);case 17:if(i=e.sent,c=i.lastServerUsn,s=i.completedServiceCalls,!c){e.next=25;break}return e.next=23,er.a.getDefaultLocator();case 23:p=e.sent,Fh(t,p,c,s);case 25:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ev(e){return tv.apply(this,arguments)}function tv(){return(tv=Ah(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mn.a.call("note.actions.update",{noteChanges:t,resourcesUpdateRequest:{}});case 3:return e.next=5,Mn.a.call("note.actions.cleardirty",[t.guid]);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Mh.error("could not upsync note ".concat(t.guid));case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function nv(e){return rv.apply(this,arguments)}function rv(){return(rv=Ah(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={completedServiceCalls:0},e.prev=1,e.next=4,Mn.a.call("note.actions.expungeNotesService",t);case 4:return n=e.sent,e.next=7,Mn.a.call("note.actions.cleardirty",t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Mh.error("could not batch up-sync locally deleted guids");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this,[[1,9]])}))).apply(this,arguments)}function ov(e){return av.apply(this,arguments)}function av(){return(av=Ah(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("workspace.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,uv(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,er.a.getLocationForWorkspaceGuid();case 13:i=e.sent,Fh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function uv(e,t){return iv.apply(this,arguments)}function iv(){return(iv=Ah(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,n.isDeleted){e.next=8;break}return e.next=5,Mn.a.call("workspace.actions.updateService",n);case 5:r=e.sent,e.next=10;break;case 8:return e.next=10,Mn.a.call("workspace.actions.leaveservice",t);case 10:return e.next=12,Mn.a.call("workspace.actions.cleardirty",t);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),Mh.error("could not upsync workspace ".concat(t));case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[1,14]])}))).apply(this,arguments)}var cv=1e3,sv=25e3,pv=n(388);function fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){lv(e,t,n[t])})}return e}function lv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function vv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){hv(a,r,o,u,i,"next",e)}function i(e){hv(a,r,o,u,i,"throw",e)}u(void 0)})}}var dv=Object(ga.default)("ion:actions:runNoteSyncCycle"),mv="NOTE_SYNC_ACTION/PERSONAL_SYNC_CYCLE",bv="NOTE_SYNC_ACTION/BUSINESS_SYNC_CYCLE";function yv(e){return gv.apply(this,arguments)}function gv(){return(gv=vv(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,m,b,y,g,w,k,x,P,R,N,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R=function(){return(R=vv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(),e.next=3,w();case 3:a=setInterval(w,sv);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},P=function(){return R.apply(this,arguments)},x=function(){a&&clearInterval(a)},k=function(){return(k=vv(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return o=!0,e.abrupt("return");case 3:if(r=!0,o=!1,dv.info("sync cycle started"),e.prev=6,t=function(){var e=n?g():y();return!Jo.a.isBootstrappingEnabled()||_h.a.isFullySynced()?v(e):m(e)}(),!n){e.next=13;break}return e.next=11,Promise.all([l(),t]);case 11:e.next=15;break;case 13:return e.next=15,t;case 15:if(Jo.a.isUpSyncDisabled()){e.next=20;break}return e.next=18,qh(c);case 18:return e.next=20,p();case 20:e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(6),e.t0!==Wh){e.next=28;break}o=!0,e.next=29;break;case 28:throw e.t0;case 29:return e.prev=29,r=!1,o&&Mn.a.publish("sync.notes"),dv.info("sync cycle complete"),e.finish(29);case 34:case"end":return e.stop()}},e,this,[[6,22,29,34]])}))).apply(this,arguments)},w=function(){return k.apply(this,arguments)},g=function(){return new Fn.SyncChunkFilter({includeNotebooks:!0,includeNotes:!0,includeNotesSharedWithMe:!0,includePreferences:!0,includeSharedNotes:!0,includeTags:!0,includeWorkspaces:!0,includeWorkspacesContent:!0,includeExpunged:!0,includeLinkedNotebooks:!0})},y=function(){return new Fn.SyncChunkFilter({includeLinkedNotebooks:!0,includeSharedNotes:!0,includePreferences:!0,includeExpunged:!0,includeNotebooks:!0,includeNotes:!0,includeTags:!0})},b=function(){return(b=vv(regeneratorRuntime.mark(function e(t){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:r=e.sent,a=n?c.PERSONAL_USN:c.BUSINESS_USN,i||(dv.log("Bootstrap: Initializing syncChunkGenerator with afterUSN ".concat(a)),i=ni({locator:r,syncChunkFilter:t,afterUSN:a}),o=function(){i.next().then(function(e){var t=e.value,o=e.done;if(t&&!o){var a=t.chunk,i=t.firstUpdateCount,s=a.chunkHighUSN;dv.log("Bootstrap: Syncing down USN: ".concat(s)),n?c.BUSINESS_USN=s:c.PERSONAL_USN=s,p(),Oa({chunk:a,firstUpdateCount:i,shouldCatchup:0===a.updateCount,locator:r}),Mn.a.publish("app.progress","chunk",s)}else dv.log("Bootstrap: setting fully synced because generator is done"),Mn.a.publish("app","synced",!0),u&&(dv.log("Bootstrap: clearing bootstrap sync interval"),clearInterval(u))})}),u||(u=setInterval(function(){o()},cv));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},m=function(e){return b.apply(this,arguments)},d=function(){return(d=vv(regeneratorRuntime.mark(function e(r){var o,a,u,i,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getDefaultLocator();case 2:return o=e.sent,e.prev=3,a=n?c.BUSINESS_USN:c.PERSONAL_USN,pv.a.startDownSync(a),dv.log("Syncing data starting from afterUSN:",a),e.next=9,si({locator:o,syncChunkFilter:r,afterUSN:a});case 9:return u=e.sent,i=u.updateCount,s=u.notebookGuids,f=u.workspaceGuids,e.next=15,mi({locator:o,notebookGuids:s,workspaceGuids:f});case 15:return n?c.BUSINESS_USN=i:c.PERSONAL_USN=i,e.next=18,p();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t.syncErrorHandler(e.t0);case 23:case"end":return e.stop()}},e,this,[[3,20]])}))).apply(this,arguments)},v=function(e){return d.apply(this,arguments)},h=function(){return(h=vv(regeneratorRuntime.mark(function e(){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getPersonalLocator();case 2:return n=e.sent,e.prev=3,dv.log("Syncing personal data starting from afterUSN:",c.PERSONAL_USN),e.next=7,si({locator:n,syncChunkFilter:new Fn.SyncChunkFilter({includeLinkedNotebooks:!0,includeSharedNotes:!0,includePreferences:!0,includeExpunged:!0,includeTags:!0}),afterUSN:c.PERSONAL_USN});case 7:return r=e.sent,o=r.updateCount,a=r.notebookGuids,u=r.workspaceGuids,e.next=13,mi({locator:n,notebookGuids:a,workspaceGuids:u});case 13:return e.next=15,Mn.a.call("sync.persist");case 15:return c.PERSONAL_USN=o,e.next=18,p();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t.syncErrorHandler(e.t0);case 23:case"end":return e.stop()}},e,this,[[3,20]])}))).apply(this,arguments)},l=function(){return h.apply(this,arguments)},f=function(){return(f=vv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("cupboard.set",{namespace:Object(Gh.a)("".concat(t.userId)),key:s,value:c});case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},p=function(){return f.apply(this,arguments)},n=t.isBusiness,r=!1,o=!1,a=null,u=null,c={PERSONAL_USN:0,BUSINESS_USN:0},s=n?bv:mv,e.next=24,Mn.a.call("cupboard.get",{namespace:Object(Gh.a)("".concat(t.userId)),key:s});case 24:return N=e.sent,c=fv({},c,N),S=Mn.a.subscribe("sync.notes",function(){P()}),Mn.a.register("sync.actions.syncbusinessnotes",vv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}},e,this)}))),e.next=30,P();case 30:if(!Object(vo.e)()){e.next=33;break}return e.next=33,Mn.a.call("notebook.actions.getUserNotebook");case 33:return e.next=35,wv();case 35:return e.abrupt("return",function(){S(),x()});case 36:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function wv(){return kv.apply(this,arguments)}function kv(){return(kv=vv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Jo.a.isBootstrappingEnabled()){e.next=5;break}return e.next=3,Th();case 3:e.next=6;break;case 5:Th();case 6:Mn.a.publish("app.progress","catchupfinished"),Jo.a.isBootstrappingEnabled()||Mn.a.publish("app","synced",!0);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function xv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xv(a,r,o,u,i,"next",e)}function i(e){xv(a,r,o,u,i,"throw",e)}u(void 0)})}}var Rv=Object(ga.default)("ion:action:processMessageSyncChunk");function Nv(e){return Sv.apply(this,arguments)}function Sv(){return(Sv=Pv(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("user.actions.getvaultuserid");case 2:return n=e.sent,e.next=5,Lv(t,function(e){return e===n});case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ov(e){return jv.apply(this,arguments)}function jv(){return(jv=Pv(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("user.actions.getactiveuser");case 2:if(n=e.sent){e.next=5;break}throw new Error("no user???");case 5:return e.next=7,Lv(t,function(e){return e===n.id});case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Lv(e,t){return Tv.apply(this,arguments)}function Tv(){return(Tv=Pv(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn.a.call("user.actions.getactiveuser");case 2:if(r=e.sent){e.next=5;break}throw new Error("no user???");case 5:return e.next=7,Mn.a.call("attachments.actions.getattachments");case 7:o=e.sent,null!=t.messages&&t.messages.length>0&&(a=t.messages.reduce(function(e,t){return(t.attachments||[]).reduce(function(e,a){if(null==a.guid)return Rv.warn("Unexpected Thrift change! Detecting attachments with no GUID!"),e;var u=o[a.guid],i=u&&u.senderId===r.id;if(u&&!i)return e;if(e[a.guid]&&e[a.guid].senderId!==r.id)return e;if(null!=a.guid){var c=a.guid,s=a.title,p=a.type,f=a.shardId,l=a.userId,h=t.senderId,v=t.sentAt,d=n(a.userId)?l:r.id;e[c]={guid:c,title:s,type:p,createdAt:v,senderId:h,shardId:f,userId:d,attachmentUserId:a.userId,external:!n(a.userId)}}return e},e)},{}),Mn.a.publish("attachments","update",a)),null!=t.threads&&t.threads.length>0&&Mn.a.publish("service.threads","update",t.threads),null!=t.identities&&t.identities.length>0&&Mn.a.publish("identity","set",t.identities);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ev(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Iv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ev(a,r,o,u,i,"next",e)}function i(e){Ev(a,r,o,u,i,"throw",e)}u(void 0)})}}function Uv(e){return Cv.apply(this,arguments)}function Cv(){return(Cv=Iv(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,e.next=3,Wv({eventId:n,locator:r,processMessageSyncChunk:Nv});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Gv(e){return _v.apply(this,arguments)}function _v(){return(_v=Iv(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,e.next=3,Wv({eventId:n,locator:r,processMessageSyncChunk:Ov});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Wv(e){return Dv.apply(this,arguments)}function Dv(){return(Dv=Iv(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,o=t.processMessageSyncChunk,e.prev=1,e.next=4,Mc.fromLocator(r);case 4:return a=e.sent,e.next=7,jc(a,new Gc.MessageSyncFilter({afterEventId:n}),r.authenticationToken);case 7:return(u=e.sent).chunkMaxEventId&&n<u.chunkMaxEventId&&setTimeout(function(){u.chunkMaxEventId&&n<u.chunkMaxEventId&&o(u)},0),e.abrupt("return",{newEventId:u.chunkMaxEventId,userEventId:u.userMaxEventId||0});case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}function Av(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mv(e,t,n[t])})}return e}function Mv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fv(a,r,o,u,i,"next",e)}function i(e){Fv(a,r,o,u,i,"throw",e)}u(void 0)})}}var Bv="MSG_SYNC_ACTION/PERSONAL_SYNC_CYCLE",Vv="MSG_SYNC_ACTION/BUSINESS_SYNC_CYCLE";function Hv(e){return Yv.apply(this,arguments)}function Yv(){return(Yv=qv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qv(t,{namespace:Bv,getMessageSyncChunk:Gv}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Jv(){return(Jv=qv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hv(t);case 2:(0,e.sent)();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Kv(e){return zv.apply(this,arguments)}function zv(){return(zv=qv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qv(t,{namespace:Vv,getMessageSyncChunk:Uv}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Xv(){return(Xv=qv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kv(t);case 2:(0,e.sent)();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Qv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=qv(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,i,c,s,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){r&&clearInterval(r)},c=function(){return(c=qv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,a();case 3:r=setInterval(a,sv);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},i=function(){return c.apply(this,arguments)},u=function(){return(u=qv(regeneratorRuntime.mark(function e(){var r,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=o.MESSAGE_EVENT_ID,u=r;case 2:return e.next=4,n.getMessageSyncChunk({eventId:u,locator:t.locator});case 4:i=e.sent,u=i.newEventId,a=i.userEventId;case 7:if(u!==a&&null!=u){e.next=2;break}case 8:return e.next=10,Mn.a.call("sync.persist");case 10:return o.MESSAGE_EVENT_ID=a,e.next=13,Mn.a.call("cupboard.set",{namespace:Object(Gh.a)("".concat(t.userId)),key:n.namespace,value:o});case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},a=function(){return u.apply(this,arguments)},r=null,o={MESSAGE_EVENT_ID:0},e.next=9,Mn.a.call("cupboard.get",{namespace:Object(Gh.a)("".concat(t.userId)),key:n.namespace});case 9:return p=e.sent,o=Av({},o,p),f=Mn.a.subscribe("sync.actions.syncworkchat",function(){i()}),e.next=14,i();case 14:return e.abrupt("return",function(){f(),s()});case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function $v(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ed(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$v(a,r,o,u,i,"next",e)}function i(e){$v(a,r,o,u,i,"throw",e)}u(void 0)})}}Mn.a.register("sync.actions.runPersonalMessageSyncCycleOnce",function(e){return Jv.apply(this,arguments)}),Mn.a.register("sync.actions.runBusinessMessageSyncCycleOnce",function(e){return Xv.apply(this,arguments)});var td={badAuthHandler:o.e,permissionDeniedHandler:o.e};function nd(e){return rd.apply(this,arguments)}function rd(){return(rd=ed(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getPersonalLocator();case 2:return n=e.sent,r={syncErrorHandler:Aa(td),userId:t.userId,isBusiness:!0},o={locator:n,userId:t.userId},e.next=7,Promise.all([yv(r),Kv(o)]);case 7:a=e.sent,pv.a.endDownSync(),Mn.a.register("sync.actions.stopbusinesssynccycle",function(){return a.forEach(function(e){e()}),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function od(e){return ad.apply(this,arguments)}function ad(){return(ad=ed(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.a.getPersonalLocator();case 2:return n=e.sent,r={syncErrorHandler:Aa(td),userId:t.userId,isBusiness:!1},o={locator:n,userId:t.userId},e.next=7,Promise.all([yv(r),Hv(o)]);case 7:a=e.sent,pv.a.endDownSync(),Mn.a.register("sync.actions.stoppersonalsynccycle",function(){return a.forEach(function(e){e()}),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ud(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function id(e){return cd.apply(this,arguments)}function cd(){return(cd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ud(a,r,o,u,i,"next",e)}function i(e){ud(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,ho.fromLocator(n);case 6:return r=e.sent,e.next=9,hr(r,t,n.authenticationToken);case 9:return o=e.sent,Mn.a.publish("submitfeedback","fileSupportTicket",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Mn.a.register("sync.actions.runpersonalsynccycle",od),Mn.a.register("sync.actions.runbusinesssynccycle",nd);var sd=id;function pd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function fd(e){return ld.apply(this,arguments)}function ld(){return(ld=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){pd(a,r,o,u,i,"next",e)}function i(e){pd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,dn(r,t,n.authenticationToken);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}Mn.a.register("submitfeedback.actions.filesupportticket",id);var hd=fd;function vd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function dd(e){return md.apply(this,arguments)}function md(){return(md=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vd(a,r,o,u,i,"next",e)}function i(e){vd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#findSearchSuggestionsV2 request is required");case 2:return e.prev=2,e.next=5,er.a.getDefaultLocator();case 5:return n=e.sent,e.next=8,$n.fromLocator(n);case 8:return r=e.sent,e.next=11,fe(r,t,n.authenticationToken);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Mn.a.register("logrequest.actions.send",fd);var bd=dd;function yd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gd(){return wd.apply(this,arguments)}function wd(){return(wd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yd(a,r,o,u,i,"next",e)}function i(e){yd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,$n.fromLocator(t);case 6:return n=e.sent,e.next=9,Vt(n,t.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("search.actions.findSearchSuggestionsV2",dd);var kd=gd;function xd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pd(e){return Rd.apply(this,arguments)}function Rd(){return(Rd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xd(a,r,o,u,i,"next",e)}function i(e){xd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,at(r,t,n.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("search.actions.listSearches",gd);var Nd=Pd;function Sd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Od(e){return jd.apply(this,arguments)}function jd(){return(jd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Sd(a,r,o,u,i,"next",e)}function i(e){Sd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,I(r,t,n.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("search.actions.getSearch",Pd);var Ld=Od;function Td(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ed(e){return Id.apply(this,arguments)}function Id(){return(Id=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Td(a,r,o,u,i,"next",e)}function i(e){Td(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,_n(r,t,n.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("search.actions.createSearch",Od);var Ud=Ed;function Cd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Gd(e){return _d.apply(this,arguments)}function _d(){return(_d=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Cd(a,r,o,u,i,"next",e)}function i(e){Cd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,$n.fromLocator(n);case 6:return r=e.sent,e.next=9,$(r,t,n.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Mn.a.register("search.actions.updateSearch",Ed);var Wd=Gd;Mn.a.register("search.actions.expungeSearch",Gd);function Dd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ad(){return(Ad=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dd(a,r,o,u,i,"next",e)}function i(e){Dd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("experimentsService","getProps2",function(e){return t.getProps2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Md=function(e,t,n){return Ad.apply(this,arguments)};function Fd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qd(){return(qd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fd(a,r,o,u,i,"next",e)}function i(e){Fd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("experimentsService","getServiceState2",function(e){return t.getServiceState2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Bd=function(e,t,n){return qd.apply(this,arguments)},Vd=n(658);function Hd(e){return(Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yd(e,t){return!t||"object"!==Hd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jd(e){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kd(e,t){return(Kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zd=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Yd(this,(e=Jd(t)).call.apply(e,[this].concat(o)))).endpoint="experiments",n.InterfaceConstructor=function(e){return new Vd.ExperimentsService.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kd(e,t)}(t,Kn),t}()),Xd=n(657),Qd=n.n(Xd);function Zd(e){return(Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function em(e){return tm.apply(this,arguments)}function tm(){return(tm=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$d(a,r,o,u,i,"next",e)}function i(e){$d(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("request is null");case 2:return e.prev=2,e.next=5,er.a.getPersonalLocator();case 5:return n=e.sent,e.next=8,zd.fromLocator(n);case 8:return r=e.sent,e.next=11,Md(r,t,n.authenticationToken);case 11:if(null!=(o=e.sent)&&null!=o.jsonResponse){e.next=14;break}throw new Error("getProps response is null");case 14:return a=JSON.parse(o.jsonResponse),u=a.props.ion_props.copy_props,i=Qd()(a),u&&i&&i.props&&i.props.ionProps&&"object"===Zd(i.props.ionProps)&&(i.props.ionProps.copyProps=u),e.abrupt("return",i);case 21:throw e.prev=21,e.t0=e.catch(2),e.t0;case 24:case"end":return e.stop()}},e,this,[[2,21]])}))).apply(this,arguments)}var nm=em;function rm(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function om(e){return am.apply(this,arguments)}function am(){return(am=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rm(a,r,o,u,i,"next",e)}function i(e){rm(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("request is null");case 2:return e.prev=2,e.next=5,er.a.getPersonalLocator();case 5:return n=e.sent,e.next=8,zd.fromLocator(n);case 8:return r=e.sent,e.next=11,Bd(r,t,n.authenticationToken);case 11:if(null!=(o=e.sent)&&null!=o.jsonResponse){e.next=14;break}throw new Error("getservicestate response is null");case 14:return e.abrupt("return",Qd()(JSON.parse(o.jsonResponse)));case 17:throw e.prev=17,e.t0=e.catch(2),e.t0;case 20:case"end":return e.stop()}},e,this,[[2,17]])}))).apply(this,arguments)}Mn.a.register("experiments.actions.getprops",em);var um=om;function im(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cm(){return(cm=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){im(a,r,o,u,i,"next",e)}function i(e){im(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("communicationengine","syncMessages",function(e){return t.syncMessages(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Mn.a.register("experiments.actions.getservicestate",om);var sm=function(e,t,n){return cm.apply(this,arguments)},pm=n(819);function fm(e){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lm(e,t){return!t||"object"!==fm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hm(e){return(hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dm=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=lm(this,(e=hm(t)).call.apply(e,[this].concat(o)))).endpoint="communicationengine",n.InterfaceConstructor=function(e){return new pm.CommunicationEngine.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,Kn),t}());function mm(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function bm(e){return ym.apply(this,arguments)}function ym(){return(ym=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){mm(a,r,o,u,i,"next",e)}function i(e){mm(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,er.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,dm.fromLocator(n);case 6:return r=e.sent,e.next=9,sm(r,t,n.authenticationToken);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var gm=bm;function wm(e){return Mn.a.publish("commengine","set",e),Promise.resolve()}Mn.a.register("commengine.actions.syncmessages",bm);var km=wm;function xm(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("commengine.actions.updatecommengine",wm);var Pm=Object(ga.default)("ion:actions:createMessageThread");function Rm(e){return Nm.apply(this,arguments)}function Nm(){return(Nm=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xm(a,r,o,u,i,"next",e)}function i(e){xm(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.threadSpec,e.prev=1,e.next=4,er.a.getPersonalLocator();case 4:return r=e.sent,e.next=7,Mc.fromLocator(r);case 7:return o=e.sent,e.next=10,Nc(o,n,r.authenticationToken||"");case 10:e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0.errorCode!==ma.EDAMErrorCode.TOO_MANY||"thread"!==e.t0.parameter){e.next=16;break}return e.abrupt("return");case 16:throw Pm.log(e.t0),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var Sm=Rm;function Om(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Mn.a.register("workchat.actions.createMessageThread",Rm);var jm=Object(ga.default)("ion:actions:sendMessageToThread");function Lm(e){return Tm.apply(this,arguments)}function Tm(){return(Tm=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Om(a,r,o,u,i,"next",e)}function i(e){Om(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,e.prev=1,e.next=4,er.a.getPersonalLocator();case 4:return r=e.sent,e.next=7,Mc.fromLocator(r);case 7:return o=e.sent,e.next=10,Cc(o,n,r.authenticationToken);case 10:e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(1),jm.log(e.t0),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var Em=Lm;function Im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Um(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Cm(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Um(a,r,o,u,i,"next",e)}function i(e){Um(a,r,o,u,i,"throw",e)}u(void 0)})}}Mn.a.register("workchat.actions.sendMessageToThread",Lm);var Gm=Object(ga.default)("ion:actions:bootstrapShortcuts");function _m(){return Wm.apply(this,arguments)}function Wm(){return(Wm=Cm(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ns(["evernote.shortcuts"]);case 3:return t=e.sent,n=t.preferences?t.preferences["evernote.shortcuts"]:[],r=n.map(function(e){return JSON.parse(e)}).filter(function(e){return null==e.updated}).reduce(function(e,t){var n=Im(t,2),r=n[0],o=n[1];return null==e[r]&&(e[r]=[]),e[r].push(o),e},{}),e.next=8,Promise.all(Object.keys(r).map(function(e){var t=r[e];switch(e){case"Note":return Promise.all(t.map(function(){var e=Cm(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ip({guid:t});case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.errorCode===ma.EDAMErrorCode.PERMISSION_DENIED){e.next=10;break}throw Gm.error(e.t0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()));case"Notebook":return Promise.all(t.map(function(){var e=Cm(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ra(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Gm.error(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()));default:return Promise.resolve()}}));case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),Gm.error(e.t0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])}))).apply(this,arguments)}var Dm=_m;Mn.a.register("shortcuts.actions.bootstrap",_m),n.d(t,"authenticateToSharedNotebook",function(){return or}),n.d(t,"bootstrapAllNotebooks",function(){return To}),n.d(t,"createNotebookInWorkspace",function(){return _o}),n.d(t,"createNotebook",function(){return qo}),n.d(t,"expungeLinkedNotebook",function(){return Yo}),n.d(t,"expungeNotebookService",function(){return Qo}),n.d(t,"getNotebook",function(){return ra}),n.d(t,"getNotebookShares",function(){return ia}),n.d(t,"getDefaultNotebook",function(){return fa}),n.d(t,"getUserNotebook",function(){return da}),n.d(t,"getLinkedNotebook",function(){return Qa}),n.d(t,"createLinkedNotebook",function(){return tu}),n.d(t,"getOrCreateLinkedNotebook",function(){return au}),n.d(t,"joinLinkedNotebook",function(){return pu}),n.d(t,"joinNotebook",function(){return xi}),n.d(t,"leaveNotebook",function(){return Si}),n.d(t,"listNotebooks",function(){return So}),n.d(t,"listLinkedNotebooks",function(){return Ei}),n.d(t,"listSharedNotebooks",function(){return go}),n.d(t,"manageNotebookShares",function(){return Vi}),n.d(t,"moveNotebookToAccount",function(){return Ki}),n.d(t,"setNotebookRecipientSettings",function(){return ec}),n.d(t,"shareNotebook",function(){return oc}),n.d(t,"shareNotebookToSelf",function(){return cc}),n.d(t,"updateNotebookService",function(){return vc}),n.d(t,"authenticateToBusiness",function(){return yc}),n.d(t,"getTsdEligibility",function(){return xc}),n.d(t,"getThreadsAndIdentities",function(){return Vc}),n.d(t,"getUser",function(){return Hu}),n.d(t,"getUserRestrictions",function(){return Kc}),n.d(t,"listBusinessUsers",function(){return Iu}),n.d(t,"sendVerificationEmail",function(){return Zc}),n.d(t,"updateBusinessUsersIfNecessary",function(){return Gu}),n.d(t,"getPreferences",function(){return ns}),n.d(t,"updatePreferences",function(){return us}),n.d(t,"getPromotionStatus",function(){return ps}),n.d(t,"promotionOptOut",function(){return vs}),n.d(t,"showPromotion",function(){return ys}),n.d(t,"getCrossPromotionInfo",function(){return xs}),n.d(t,"acquireNoteLock",function(){return Ss}),n.d(t,"addResourceToNote",function(){return Is}),n.d(t,"copyNote",function(){return Ms}),n.d(t,"createNote",function(){return Ys}),n.d(t,"findNotesMetadata",function(){return $s}),n.d(t,"createNoteShare",function(){return hp}),n.d(t,"expungeNotesService",function(){return yp}),n.d(t,"getNote",function(){return ip}),n.d(t,"getNoteLockStatus",function(){return xp}),n.d(t,"getNoteResourceMap",function(){return Op}),n.d(t,"getNoteShares",function(){return Ep}),n.d(t,"getNoteSnippets",function(){return Mp}),n.d(t,"manageNoteShares",function(){return Yp}),n.d(t,"releaseNoteLock",function(){return Xp}),n.d(t,"selectNote",function(){return nf}),n.d(t,"shareNote",function(){return uf}),n.d(t,"stopSharingNote",function(){return ff}),n.d(t,"updateNote",function(){return If}),n.d(t,"updateNoteLock",function(){return _f}),n.d(t,"bootstrapTags",function(){return Kf}),n.d(t,"createTag",function(){return Zf}),n.d(t,"deleteTagService",function(){return nl}),n.d(t,"findNoteCounts",function(){return Vf}),n.d(t,"listTags",function(){return Mf}),n.d(t,"listTagsByNotebook",function(){return ul}),n.d(t,"updateTag",function(){return pl}),n.d(t,"addUsersToWorkspace",function(){return Rl}),n.d(t,"bootstrapWorkspace",function(){return Il}),n.d(t,"bootstrapWorkspaces",function(){return _l}),n.d(t,"createWorkspace",function(){return Ml}),n.d(t,"getWorkspace",function(){return ml}),n.d(t,"getWorkspaceContent",function(){return jl}),n.d(t,"leaveWorkspaceService",function(){return Hl}),n.d(t,"manageWorkspaceSharing",function(){return wl}),n.d(t,"removeUsersFromWorkspace",function(){return zl}),n.d(t,"seeWorkspace",function(){return eh}),n.d(t,"updateWorkspaceService",function(){return oh}),n.d(t,"getWorkspaceUserInterfaceProperties",function(){return ch}),n.d(t,"setWorkspaceUserInterfaceLayoutStyle",function(){return lh}),n.d(t,"setNoteUserInterfaceDisplayOrder",function(){return mh}),n.d(t,"setNotebookUserInterfaceDisplayOrder",function(){return wh}),n.d(t,"setNotebookUserInterfaceColors",function(){return Rh}),n.d(t,"catchupStragglers",function(){return Th}),n.d(t,"catchupSync",function(){return mi}),n.d(t,"getFilteredSyncChunk",function(){return si}),n.d(t,"filteredSyncChunkGenerator",function(){return ni}),n.d(t,"getSyncState",function(){return Xu}),n.d(t,"getSyncStateWithMetrics",function(){return Ch}),n.d(t,"processSyncChunk",function(){return Oa}),n.d(t,"runBusinessSyncCycle",function(){return nd}),n.d(t,"runPersonalSyncCycle",function(){return od}),n.d(t,"fileSupportTicket",function(){return sd}),n.d(t,"sendLogRequest",function(){return hd}),n.d(t,"findSearchSuggestionsV2",function(){return bd}),n.d(t,"listSearches",function(){return kd}),n.d(t,"getSearch",function(){return Nd}),n.d(t,"createSearch",function(){return Ld}),n.d(t,"updateSearch",function(){return Ud}),n.d(t,"expungeSearch",function(){return Wd}),n.d(t,"getProps",function(){return nm}),n.d(t,"getServiceState",function(){return um}),n.d(t,"syncMessages",function(){return gm}),n.d(t,"updateCommEngine",function(){return km}),n.d(t,"createMessageThread",function(){return Sm}),n.d(t,"sendMessageToThread",function(){return Em}),n.d(t,"bootstrapShortcuts",function(){return Dm})}}]);